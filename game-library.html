<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GameBox æ¸¸ç›’ - æ¸¸æˆåº“</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="index.css" />
</head>
<body data-current-page="library">
<div class="page">
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-mark">G</div>
        <div>
          <div>GameBox æ¸¸ç›’</div>
          <div class="logo-sub">LIGHTWEIGHT GAME HUB</div>
        </div>
      </a>

      <nav class="nav-main">
        <a href="index.html" data-page="home" class="nav-link">é¦–é¡µ</a>
        <a href="news-list.html" data-page="news" class="nav-link">èµ„è®¯</a>
        <a href="game-library.html" data-page="library" class="nav-link">æ¸¸æˆåº“</a>
        <a href="ranking.html" data-page="ranking" class="nav-link">
          æ’è¡Œæ¦œ <span class="badge">HOT</span>
        </a>
        <a href="discount.html" data-page="discount" class="nav-link">æŠ˜æ‰£ / å²ä½</a>
        <a href="community.html" data-page="community" class="nav-link">ç¤¾åŒº</a>
        <a href="my-library.html" data-page="my" class="nav-link">æˆ‘çš„æ¸¸æˆ</a>
        <a href="tools.html" data-page="tools" class="nav-link">å·¥å…·ä¸­å¿ƒ</a>
        <a href="profile.html" data-page="profile" class="nav-link">ç”¨æˆ·ä¸­å¿ƒ</a>
      </nav>

      <div class="header-right">
        <div class="header-search">
          <input type="text" placeholder="æœç´¢æ¸¸æˆ / èµ„è®¯ / å¸–å­" />
          <span class="header-search-icon">ğŸ”</span>
        </div>
        <button class="header-user">æœªç™»å½• Â· æ¸¸å®¢</button>
      </div>
    </div>
  </header>

  <main class="main">
    <section>
      <div class="card">
        <div class="page-title">æ¸¸æˆåº“</div>
        <div class="page-intro">
          é€šè¿‡åç§°ã€ç±»å‹ã€å¹³å°å’Œä»·æ ¼åŒºé—´æ¥ç­›é€‰ä½ æ„Ÿå…´è¶£çš„æ¸¸æˆï¼ˆç¤ºä¾‹æ•°æ®ï¼‰ã€‚
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span>
            <span>ç­›é€‰æ¡ä»¶</span>
          </div>
        </header>

        <div class="form">
          <div class="form-row">
            <label for="libSearch">æŒ‰åç§°æœç´¢</label>
            <input type="text" id="libSearch" placeholder="è¾“å…¥æ¸¸æˆåï¼Œå¦‚ï¼šè‰¾å°”ç™»æ³•ç¯" />
          </div>

          <div class="form-row">
            <label for="libType">ç±»å‹</label>
            <select id="libType">
              <option value="all">å…¨éƒ¨ç±»å‹</option>
              <option value="action">åŠ¨ä½œ / ACT</option>
              <option value="rpg">è§’è‰²æ‰®æ¼” / RPG</option>
              <option value="strategy">ç­–ç•¥ / SLG</option>
              <option value="indie">ç‹¬ç«‹ / Indie</option>
              <option value="multiplayer">å¤šäººè”æœº</option>
              <option value="casual">ä¼‘é—² / è½»åº¦</option>
              <option value="card">å¡ç‰Œ</option>
            </select>
          </div>

          <div class="form-row">
            <label>å¹³å°ï¼ˆå¯å¤šé€‰ï¼‰</label>
            <div id="libPlatforms" style="display:flex;flex-wrap:wrap;gap:8px;font-size:12px;">
              <label><input type="checkbox" value="steam" checked /> Steam</label>
              <label><input type="checkbox" value="pc" checked /> PCï¼ˆå…¶ä»–å¹³å°ï¼‰</label>
              <label><input type="checkbox" value="ps" checked /> PlayStation</label>
              <label><input type="checkbox" value="switch" checked /> Switch</label>
              <label><input type="checkbox" value="mobile" checked /> æ‰‹æœº</label>
            </div>
          </div>

          <div class="form-row">
            <label for="libPrice">ä»·æ ¼åŒºé—´</label>
            <select id="libPrice">
              <option value="all">å…¨éƒ¨</option>
              <option value="free">å…è´¹ / F2P</option>
              <option value="low">100 å…ƒä»¥ä¸‹</option>
              <option value="high">100 å…ƒä»¥ä¸Š</option>
            </select>
          </div>
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span>
            <span>ç­›é€‰ç»“æœ</span>
          </div>
          <div class="chip" id="libResultCount">å…± 0 æ¬¾</div>
        </header>
        <div id="libList" class="game-list"></div>
      </div>
    </section>

    <aside>
      <div class="sidebar-card">
        <div class="sidebar-title">å°æç¤º</div>
        <div class="sidebar-item">
          <span class="label">å¯ä¸é¦–é¡µåˆ†ç±»è”åŠ¨</span>
          <span class="value">æ”¯æŒ</span>
        </div>
        <div class="sidebar-item">
          <span class="label">æ•°æ®æ¥æº</span>
          <span class="value">ç¤ºä¾‹å‡æ•°æ®</span>
        </div>
      </div>
    </aside>
  </main>
</div>

<script src="common.js"></script>
<script>
  initCommon();

  const gameData = [
    {
    id: "elden-ring",
    name: "è‰¾å°”ç™»æ³•ç¯",
    platforms: ["steam", "ps"],
    type: "rpg",
    tags: ["é­‚ç±»", "å¼€æ”¾ä¸–ç•Œ"],
    price: 298,
    rating: 9.4
  },
  {
    id: "genshin",
    name: "åŸç¥",
    platforms: ["pc", "mobile", "ps"],
    type: "rpg",
    tags: ["å¼€æ”¾ä¸–ç•Œ", "æŠ½å¡"],
    price: 0,
    rating: 10
  },
  {
    id: "cs2",
    name: "CS2",
    platforms: ["steam"],
    type: "multiplayer",
    tags: ["FPS", "ç«æŠ€"],
    price: 0,
    rating: 8.6
  },
  {
    id: "mh-world",
    name: "æ€ªç‰©çŒäººï¼šä¸–ç•Œ",
    platforms: ["steam", "ps"],
    type: "action",
    tags: ["åˆ·åˆ·åˆ·", "åˆä½œ"],
    price: 248,
    rating: 8.5
  },
  {
    id: "hollow-knight",
    name: "ç©ºæ´éª‘å£«",
    platforms: ["steam", "switch"],
    type: "indie",
    tags: ["ç±»é“¶æ²³æˆ˜å£«æ¶é­”åŸ", "ç¡¬æ ¸"],
    price: 48,
    rating: 9.6
  },
  {
    id: "cp2077",
    name: "èµ›åšæœ‹å…‹ 2077",
    platforms: ["steam", "ps"],
    type: "rpg",
    tags: ["å¼€æ”¾ä¸–ç•Œ", "ç§‘å¹»"],
    price: 298,
    rating: 8.7
  },
  {
    id: "mh-rise",
    name: "æ€ªç‰©çŒäººï¼šå´›èµ·",
    platforms: ["steam", "switch"],
    type: "action",
    tags: ["åˆ·åˆ·åˆ·", "åˆä½œ"],
    price: 268,
    rating: 8.5
  },
  {
    id: "fake-strategy",
    name: "è™šæ„ç­–ç•¥ï¼šé“¶æ²³æ£‹å±€",
    platforms: ["pc"],
    type: "strategy",
    tags: ["SLG", "å›åˆåˆ¶"],
    price: 88,
    rating: 8.2
  },
  {
    id: "fake-casual",
    name: "ä¸‹ç­ä¹‹åï¼šå°é•‡æ—¶å…‰",
    platforms: ["mobile"],
    type: "casual",
    tags: ["ä¼‘é—²", "æ¨¡æ‹Ÿç»è¥"],
    price: 0,
    rating: 7.9
  },
  {
    id: "stardew-valley",
    name: "æ˜Ÿéœ²è°·ç‰©è¯­",
    platforms: ["steam", "switch"],
    type: "indie",
    tags:["ä¼‘é—²", "æ¨¡æ‹Ÿç»è¥"],
    price: 48,
    rating: 9.8
  },
  {
    id: "cuphead",
    name: "èŒ¶æ¯å¤´",
    platforms: ["steam", "switch"],
    type: "indie",
    tags: ["é­‚ç±»"],
    price: 68,
    rating: 9.7
  },
  {
    id: "ygo-md",
    name: "æ¸¸æˆç‹ï¼šå¤§å¸ˆå†³æ–—",
    platforms: ["steam", "switch"],
    type: "card game",
    tags: ["å¡ç‰Œ", "ç­–ç•¥"],
    price: 0,
    rating: 8.4
  },
  {
    id: "warframe",
    name: "æ˜Ÿé™…æˆ˜ç”²",
    platforms: ["steam"],
    type: "action",
    tags: ["ç¬¬ä¸‰äººç§°å°„å‡»", "è·‘é…·", "ç§‘å¹»", "åˆ·åˆ·åˆ·"],
    price: 0,
    rating: 9.0
  },
  {
    id: "dota-2",
    name: "DOTA2",
    platforms: ["steam"],
    type: "strategy",
    tags: ["ç­–ç•¥", "å¤šäººè”æœº"],
    price: 0,
    rating: 8.9
  },
  {
    id: "fortnite",
    name: "å ¡å’ä¹‹å¤œ",
    platforms: ["ps", "switch"],
    type: "shooter",
    tags: ["åƒé¸¡", "å»ºé€ ", "å¤šäººè”æœº"],
    price: 0,
    rating: 8.1
  },
  {
    id: "fall-guys",
    name: "ç³–è±†äºº",
    platforms: ["steam", "ps", "switch"],
    type: "party",
    tags: ["ä¼‘é—²", "ç«æŠ€", "å¤šäººä¹±æ–—"],
    price: 0,
    rating: 7.9
  },
  {
    id: "team-fortress-2",
    name: "ç»åœ°è¦å¡2",
    platforms: ["steam"],
    type: "shooter",
    tags: ["å›¢é˜Ÿæˆ˜", "FPS", "ç»å…¸"],
    price: 0,
    rating: 8.8
  },
  {
    id: "rocket-league",
    name: "ç«ç®­è”ç›Ÿ",
    platforms: ["steam", "ps", "switch"],
    type: "sports",
    tags: ["å¤šäººè”æœº", "ç«æŠ€", "è¶³çƒ + èµ›è½¦"],
    price: 0,
    rating: 8.7
  },
  {
    id: "destiny-2",
    name: "å‘½è¿2",
    platforms: ["steam", "ps"],
    type: "shooter",
    tags: ["FPS", "ç§‘å¹»", "åˆä½œ"],
    price: 0,
    rating: 8.2
  },
  {
    id: "paladins",
    name: "æªç«æ¸¸ä¾ ",
    platforms: ["steam", "ps", "switch"],
    type: "shooter",
    tags: ["è‹±é›„å°„å‡»", "å¤šäººè”æœº"],
    price: 0,
    rating: 7.8
  },
  {
    id: "brawlhalla",
    name: "ä¹±æ–—è‹±é›„",
    platforms: ["steam", "ps", "switch"],
    type: "fighting",
    tags: ["æ ¼æ–—", "å¤šäººå¯¹æˆ˜", "ä¼‘é—²"],
    price: 0,
    rating: 8.3
  },
  {
    id: "war-thunder",
    name: "æˆ˜äº‰é›·éœ†",
    platforms: ["steam", "ps"],
    type: "simulation",
    tags: ["è½½å…·æˆ˜æ–—", "å†›äº‹", "å¤šäººè”æœº"],
    price: 0,
    rating: 8.1
  },
  {
    id: "path-of-exile",
    name: "æµæ”¾ä¹‹è·¯",
    platforms: ["steam", "ps"],
    type: "arpg",
    tags: ["åˆ·åˆ·åˆ·", "æš—é»‘é£", "æ·±åº¦å…»æˆ"],
    price: 0,
    rating: 8.9
  },
  {
    id: "pokemon-unite",
    name: "å®å¯æ¢¦å¤§é›†ç»“",
    platforms: ["switch"],
    type: "moba",
    tags: ["MOBA", "å®å¯æ¢¦", "å›¢é˜Ÿç«æŠ€"],
    price: 0,
    rating: 8.0
  },
  {
    id: "god-of-war",
    name: "æˆ˜ç¥4",
    platforms: ["steam", "ps"],
    type: "action",
    tags: ["å‰§æƒ…", "åŠ¨ä½œ", "åŒ—æ¬§ç¥è¯"],
    price: 39.99,
    rating: 9.6
  },
  {
    id: "zelda-totk",
    name: "å¡å°”è¾¾ä¼ è¯´ï¼šç‹å›½ä¹‹æ³ª",
    platforms: ["switch"],
    type: "adventure",
    tags: ["å¼€æ”¾ä¸–ç•Œ", "è§£è°œ", "æ¢ç´¢"],
    price: 69.99,
    rating: 9.8
  },
  {
    id: "red-dead-redemption-2",
    name: "è’é‡å¤§é•–å®¢2",
    platforms: ["steam", "ps"],
    type: "action",
    tags: ["å¼€æ”¾ä¸–ç•Œ", "è¥¿éƒ¨", "å‰§æƒ…"],
    price: 59.99,
    rating: 9.7
  },
  {
    id: "hades",
    name: "é»‘å¸æ–¯",
    platforms: ["steam", "switch", "ps"],
    type: "roguelike",
    tags: ["è‚‰é¸½", "åŠ¨ä½œ", "ç‹¬ç«‹æ¸¸æˆ"],
    price: 24.99,
    rating: 9.0
  },
  {
    id: "apex-legends",
    name: "Apex Legends",
    platforms: ["steam", "ps", "switch"],
    type: "shooter",
    tags: ["åƒé¸¡", "å¤šäººè”æœº", "FPS"],
    price: 0,
    rating: 8.6
  },
  {
    id: "lol",
    name: "è‹±é›„è”ç›Ÿ",
    platforms: ["pc"],
    type: "multiplayer",
    tags: ["MOBA", "è”æœº", "å…è´¹"],
    price: 0,
    rating: 8.3
  },
  {
    id: "slay-the-spire",
    name: "æ€æˆ®å°–å¡”",
    platforms: ["steam", "switch", "mobile"],
    type: "strategy",
    tags: ["å¡ç‰Œ", "Roguelike", "ç‹¬ç«‹"],
    price: 80,
    rating: 9.0
  },
  {
    id: "lolm",
    name: "è‹±é›„è”ç›Ÿæ‰‹æ¸¸",
    platforms: ["mobile"],
    type: "multiplayer",
    tags: ["MOBA", "è”æœº", "å…è´¹"],
    price: 0,
    rating: 8.3
  },
   {
    id: "honor-king",
    name: "ç‹è€…è£è€€",
    platforms: ["mobile"],
    type: "multiplayer",
    tags: ["MOBA", "è”æœº", "å…è´¹"],
    price: 0,
    rating: 5.9
  },
  {
    id: "snap",
    name: "æ¼«å¨ç»ˆæé€†è½¬",
    platforms: ["steam", "mobile","pc"],
    type: "card game",
    tags: ["å¡ç‰Œ", "ç­–ç•¥"],
    price: 0,
    rating: 7.6
  },
   {
    id: "Arknights",
    name: "æ˜æ—¥æ–¹èˆŸ",
    platforms: ["mobile"],
    type: "card game",
    tags: ["å¡ç‰Œ", "ç­–ç•¥"],
    price: 0,
    rating: 9.0
  },
  {
    id: "beng",
    name: "å´©åä¸‰",
    platforms: ["mobile","pc"],
    type: "action",
    tags: ["åŠ¨ä½œ"],
    price: 0,
    rating: 8.0
  },
   {
    id: "mc",
    name: "æˆ‘çš„ä¸–ç•Œ",
    platforms: ["mobile","pc"],
    type: "rpg",
    tags: ["è§’è‰²æ‰®æ¼”"],
    price: 0,
    rating: 8.0
  },
  ];

  const libSearch = document.getElementById("libSearch");
  const libType = document.getElementById("libType");
  const libPrice = document.getElementById("libPrice");
  const libPlatforms = document.getElementById("libPlatforms");
  const libList = document.getElementById("libList");
  const libResultCount = document.getElementById("libResultCount");
  
  gameData.forEach(g => {
  g.cover = `../images/covers/${g.id}.jpg`;
});
  
  function getSelectedPlatforms() {
    return Array.from(libPlatforms.querySelectorAll("input[type=checkbox]:checked")).map(
      (el) => el.value
    );
  }

  function matchesFilters(game, keyword, type, price, platforms) {
    const kw = keyword.trim().toLowerCase();
    if (kw) {
      const text = (game.name + " " + game.tags.join(" ")).toLowerCase();
      if (!text.includes(kw)) return false;
    }

    if (type !== "all" && game.type !== type) return false;

    if (platforms.length) {
      const hit = game.platforms.some((p) => platforms.includes(p));
      if (!hit) return false;
    }

    if (price === "free" && game.price !== 0) return false;
    if (price === "low" && !(game.price > 0 && game.price <= 100)) return false;
    if (price === "high" && !(game.price > 100)) return false;

    return true;
  }

  function renderList() {
    const keyword = libSearch.value;
    const type = libType.value;
    const price = libPrice.value;
    const platforms = getSelectedPlatforms();

    const filtered = gameData.filter((g) =>
      matchesFilters(g, keyword, type, price, platforms)
    );

    libList.innerHTML = "";
    libResultCount.textContent = `å…± ${filtered.length} æ¬¾`;

    if (!filtered.length) {
      libList.innerHTML =
        '<div style="font-size:12px;color:var(--text-muted);">æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ¸¸æˆï¼Œå¯ä»¥å°è¯•æ”¾å®½ç­›é€‰æ¡ä»¶ã€‚</div>';
      return;
    }

    filtered.forEach((g) => {
      const div = document.createElement("div");
      div.className = "game-card";
      div.innerHTML = `
        <div class="game-cover" style="background-image: url('${g.cover}')"></div>
        <div class="game-info">
          <div class="game-name">${g.name}</div>
          <div class="game-meta">
            ç±»å‹ï¼š${g.type.toUpperCase()} Â· å¹³å°ï¼š${g.platforms.join("/")} Â· è¯„åˆ†ï¼š${g.rating.toFixed(
        1
      )}
          </div>
          <div class="game-footer">
            ${
              g.price === 0
                ? '<span class="tag tag--accent">å…è´¹</span>'
                : `<span class="tag">ä»·æ ¼ï¼šÂ¥${g.price}</span>`
            }
            ${g.tags.map((t) => `<span class="tag">${t}</span>`).join("")}
          </div>
        </div>
      `;
      div.addEventListener("click", () => {
        if (g.id === "elden-ring") {
          window.location.href = "game-detail.html";
        }
      });
      libList.appendChild(div);
    });
  }

  libSearch.addEventListener("input", renderList);
  libType.addEventListener("change", renderList);
  libPrice.addEventListener("change", renderList);
  libPlatforms.addEventListener("change", renderList);

  // å¦‚æœæ˜¯ä»é¦–é¡µåˆ†ç±»è·³è½¬è€Œæ¥ï¼Œå¤„ç† URL å‚æ•° cat
  const params = new URLSearchParams(window.location.search);
  const cat = params.get("cat");
  if (cat) {
    if (cat === "action" || cat === "rpg" || cat === "strategy" || cat === "indie" || cat === "multiplayer" || cat === "casual") {
      libType.value = cat;
    } else if (cat === "free") {
      libPrice.value = "free";
    }
  }

  renderList();
</script>
</body>
</html>
