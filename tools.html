<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GameBox æ¸¸ç›’ - å·¥å…·ä¸­å¿ƒ</title>
  <!-- Cyberpunk Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="index.css" />
  <style>
    /* å·¥å…·å¡ç‰‡å¢å¼ºæ ·å¼ */
    .tool-card {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.8), rgba(31, 41, 55, 0.6));
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .tool-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .tool-card:hover {
      border-color: var(--accent);
      box-shadow: 0 0 30px rgba(56, 189, 248, 0.3);
      transform: translateY(-4px);
    }
    
    .tool-card:hover::before {
      left: 100%;
    }
    
    .tool-header {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
    }
    
    .tool-icon {
      font-size: 32px;
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(255, 211, 0, 0.2));
      border-radius: 12px;
      border: 2px solid rgba(56, 189, 248, 0.4);
    }
    
    .tool-info {
      flex: 1;
    }
    
    .tool-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 4px;
    }
    
    .tool-desc {
      font-size: 13px;
      color: var(--text-muted);
    }
    
    .tool-content {
      margin-top: 20px;
    }
    
    .result-box {
      margin-top: 16px;
      padding: 16px;
      background: rgba(56, 189, 248, 0.05);
      border-radius: 8px;
      border-left: 4px solid var(--accent);
      font-size: 14px;
      line-height: 1.6;
      display: none;
    }
    
    .result-box.show {
      display: block;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .input-group label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-soft);
    }
    
    .input-group input,
    .input-group select {
      padding: 10px 12px;
      background: rgba(17, 24, 39, 0.6);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 6px;
      color: var(--text-main);
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .input-group input:focus,
    .input-group select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.1);
    }
    
    .btn-tool {
      padding: 12px 32px;
      background: linear-gradient(135deg, var(--accent), #0ea5e9);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Orbitron', sans-serif;
    }
    
    .btn-tool:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(56, 189, 248, 0.4);
    }
    
    .btn-tool:active {
      transform: translateY(0);
    }
    
    .btn-tool:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .game-pool {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 12px;
      margin: 16px 0;
    }
    
    .game-tag {
      padding: 8px 12px;
      background: rgba(56, 189, 248, 0.1);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 6px;
      font-size: 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-soft);
    }
    
    .game-tag:hover {
      background: rgba(56, 189, 248, 0.2);
      border-color: var(--accent);
      color: var(--accent);
      transform: scale(1.05);
    }
    
    .game-tag.selected {
      background: var(--accent);
      border-color: var(--accent);
      color: #000;
      font-weight: 700;
    }
    
    .price-comparison {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 16px;
    }
    
    .platform-price {
      padding: 16px;
      background: rgba(17, 24, 39, 0.6);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 8px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .platform-price:hover {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    
    .platform-name {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 8px;
    }
    
    .platform-current {
      font-size: 24px;
      font-weight: 900;
      color: var(--danger);
      font-family: 'Orbitron', sans-serif;
    }
    
    .platform-original {
      font-size: 12px;
      color: var(--text-muted);
      text-decoration: line-through;
      margin-top: 4px;
    }
    
    .platform-discount {
      display: inline-block;
      margin-top: 8px;
      padding: 4px 8px;
      background: var(--danger);
      color: #fff;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 700;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
      margin-top: 16px;
    }
    
    .stat-item {
      padding: 16px;
      background: rgba(56, 189, 248, 0.05);
      border-radius: 8px;
      text-align: center;
      border: 1px solid rgba(56, 189, 248, 0.2);
    }
    
    .stat-value {
      font-size: 28px;
      font-weight: 900;
      color: var(--accent);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 4px;
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .rolling-text {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      text-align: center;
      padding: 20px;
      animation: pulse 0.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.05);
      }
    }
  </style>
</head>
<body data-current-page="tools" class="cyberpunk-theme">
<div class="page">
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-mark">G</div>
        <div>
          <div>GameBox æ¸¸ç›’</div>
          <div class="logo-sub">LIGHTWEIGHT GAME HUB</div>
        </div>
      </a>
      <nav class="nav-main">
        <a href="index.html" data-page="home" class="nav-link">é¦–é¡µ</a>
        <a href="game-library.html" data-page="library" class="nav-link">æ¸¸æˆåº“</a>
        <a href="ranking.html" data-page="ranking" class="nav-link">
          æ’è¡Œæ¦œ <span class="badge">HOT</span>
        </a>
        <a href="discount.html" data-page="discount" class="nav-link">æŠ˜æ‰£ / å²ä½</a>
        <a href="community.html" data-page="community" class="nav-link">ç¤¾åŒº</a>
        <a href="news-list.html" data-page="news" class="nav-link">èµ„è®¯</a>
        <a href="tools.html" data-page="tools" class="nav-link">å·¥å…·</a>
        <a href="my-library.html" data-page="my" class="nav-link">æˆ‘çš„æ¸¸æˆ</a>
        <a href="profile.html" data-page="profile" class="nav-link">ç”¨æˆ·ä¸­å¿ƒ</a>
      </nav>
      <div class="header-right">
        <div class="header-search">
          <input type="text" placeholder="æœç´¢æ¸¸æˆ / èµ„è®¯ / å¸–å­" />
          <span class="header-search-icon">ğŸ”</span>
        </div>
        <button class="header-user">æœªç™»å½• Â· æ¸¸å®¢</button>
      </div>
    </div>
  </header>
  
  <!-- Cyberpunk Effects -->
  <canvas id="matrix-canvas" class="matrix-bg"></canvas>
  <div id="particles-container" class="particles-container"></div>
  <div id="scroll-progress" class="scroll-progress"></div>
  <div id="loading-overlay" class="loading-overlay">
    <div class="cyberpunk-loader">
      <div class="loader-hexagon"></div>
      <div class="loader-text">LOADING...</div>
    </div>
  </div>

  <main class="main">
    <section>
      <div class="card">
        <div class="page-title">ğŸ› ï¸ å·¥å…·ä¸­å¿ƒ</div>
        <div class="page-intro">
          ä¸ºç©å®¶æä¾›å®ç”¨çš„æ¸¸æˆå·¥å…·ï¼šé…ç½®è¯„ä¼°ã€ä»·æ ¼å¯¹æ¯”ã€é€šå…³æ—¶é—´è®¡ç®—ã€æ¸¸æˆæ¨èç­‰åŠŸèƒ½ï¼Œè®©ä½ çš„æ¸¸æˆä½“éªŒæ›´åŠ ä¾¿æ·é«˜æ•ˆï¼
        </div>
      </div>

      <!-- é…ç½®ä¼°ç®—å·¥å…· -->
      <div class="tool-card">
        <div class="tool-header">
          <div class="tool-icon">ğŸ’»</div>
          <div class="tool-info">
            <div class="tool-title">é…ç½® vs ç”»è´¨è¯„ä¼°å™¨</div>
            <div class="tool-desc">è‡ªåŠ¨æ£€æµ‹ç”µè„‘é…ç½®æˆ–æ‰‹åŠ¨è¾“å…¥ï¼ŒåŸºäºçœŸå®æ€§èƒ½æ•°æ®æ™ºèƒ½æ¨èæœ€ä½³ç”»è´¨</div>
          </div>
        </div>
        <div class="tool-content">
          <!-- æ£€æµ‹æŒ‰é’®åŒº -->
          <div style="margin-bottom: 20px; text-align: center;">
            <button class="btn-tool" id="detectBtn" style="margin-right: 12px;">ğŸ” è‡ªåŠ¨æ£€æµ‹é…ç½®</button>
            <button class="btn-tool" id="manualBtn" style="background: rgba(255, 211, 0, 0.1); border-color: var(--warning); color: var(--warning);">âœï¸ æ‰‹åŠ¨è¾“å…¥</button>
          </div>
          
          <!-- æ£€æµ‹ç»“æœæ˜¾ç¤º -->
          <div id="detectedInfo" style="display: none; margin-bottom: 20px; padding: 16px; background: rgba(56, 189, 248, 0.05); border-radius: 8px; border-left: 4px solid var(--accent);">
            <div style="font-size: 14px; font-weight: 700; color: var(--accent); margin-bottom: 12px;">âš¡ æ£€æµ‹åˆ°çš„é…ç½®ï¼š</div>
            <div id="detectedSpecs" style="font-size: 13px; color: var(--text-soft); line-height: 1.8;"></div>
          </div>

          <!-- æ‰‹åŠ¨è¾“å…¥è¡¨å• -->
          <div id="manualForm" style="display: none;">
            <div class="form-grid">
              <div class="input-group">
                <label for="manualCpuInput">ğŸ”§ CPU å‹å·</label>
                <input type="text" id="manualCpuInput" placeholder="ä¾‹å¦‚: i7-14700K æˆ– R7 7800X3D" style="width: 100%; padding: 12px; border: 1px solid rgba(56, 189, 248, 0.3); background: rgba(17, 24, 39, 0.8); color: var(--text-soft); border-radius: 8px; font-size: 14px;" />
              </div>
              <div class="input-group">
                <label for="manualGpuInput">ğŸ® æ˜¾å¡å‹å·</label>
                <input type="text" id="manualGpuInput" placeholder="ä¾‹å¦‚: RTX 4070 Ti æˆ– RX 7900 XT" style="width: 100%; padding: 12px; border: 1px solid rgba(56, 189, 248, 0.3); background: rgba(17, 24, 39, 0.8); color: var(--text-soft); border-radius: 8px; font-size: 14px;" />
              </div>
              <div class="input-group">
                <label for="manualRamInput">ğŸ’¾ å†…å­˜å®¹é‡ (GB)</label>
                <input type="number" id="manualRamInput" placeholder="ä¾‹å¦‚: 16" min="4" max="256" style="width: 100%; padding: 12px; border: 1px solid rgba(56, 189, 248, 0.3); background: rgba(17, 24, 39, 0.8); color: var(--text-soft); border-radius: 8px; font-size: 14px;" />
              </div>
              <div class="input-group">
                <label for="manualResolution">ğŸ–¥ï¸ ç›®æ ‡åˆ†è¾¨ç‡</label>
                <select id="manualResolution" style="width: 100%; padding: 12px; border: 1px solid rgba(56, 189, 248, 0.3); background: rgba(17, 24, 39, 0.8); color: var(--text-soft); border-radius: 8px; font-size: 14px;">
                  <option value="1080">1080p (1920x1080)</option>
                  <option value="1440" selected>2K (2560x1440)</option>
                  <option value="2160">4K (3840x2160)</option>
                  <option value="ultrawide">è¶…å®½å± (3440x1440)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- è‡ªåŠ¨é…ç½®è¡¨å• -->
          <div id="autoForm">
            <div class="form-grid">
              <div class="input-group">
                <label for="cfgCpu">ğŸ”§ CPU ç­‰çº§</label>
                <select id="cfgCpu">
                  <option value="budget">å…¥é—¨çº§ (i3-12100/R5 5500/R3 7300X)</option>
                  <option value="low">ä¸­ä½ç«¯ (i5-12400/R5 5600/R5 7500F)</option>
                  <option value="mid" selected>ä¸»æµçº§ (i5-13600K/R7 5800X3D/R7 7700X)</option>
                  <option value="high">é«˜ç«¯çº§ (i7-14700K/R9 7900X/i9-13900K)</option>
                  <option value="ultra">æ——èˆ°çº§ (i9-14900K/R9 7950X3D/i9-14900KS)</option>
                  <option value="next-gen">æ¬¡ä¸–ä»£ (Intel Core Ultra 9/AMD Ryzen 9000ç³»åˆ—)</option>
                </select>
              </div>
              <div class="input-group">
                <label for="cfgGpu">ğŸ® æ˜¾å¡ç­‰çº§</label>
                <select id="cfgGpu">
                  <option value="budget">å…¥é—¨çº§ (GTX 1650/RX 6400/RTX 3050)</option>
                  <option value="low">ä¸­ä½ç«¯ (RTX 3060/RX 6600 XT/RTX 4060)</option>
                  <option value="mid" selected>ä¸»æµçº§ (RTX 4060 Ti/RX 7600 XT/RTX 3070)</option>
                  <option value="high">é«˜ç«¯çº§ (RTX 4070/RX 7800 XT/RTX 4070 Ti)</option>
                  <option value="ultra">æ——èˆ°çº§ (RTX 4080/RX 7900 XTX/RTX 4090)</option>
                  <option value="rtx50-high">æ¬¡ä¸–ä»£é«˜ç«¯ (RTX 5070/RTX 5070 Ti)</option>
                  <option value="rtx50-ultra">æ¬¡ä¸–ä»£æ——èˆ° (RTX 5080/RTX 5090)</option>
                </select>
              </div>
              <div class="input-group">
                <label for="cfgRam">ğŸ’¾ å†…å­˜å®¹é‡</label>
                <select id="cfgRam">
                  <option value="8">8GB</option>
                  <option value="16" selected>16GB</option>
                  <option value="32">32GB</option>
                  <option value="64">64GB+</option>
                </select>
              </div>
              <div class="input-group">
                <label for="cfgResolution">ğŸ–¥ï¸ æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡</label>
                <select id="cfgResolution">
                  <option value="1080">1080p (1920x1080)</option>
                  <option value="1440" selected>2K (2560x1440)</option>
                  <option value="2160">4K (3840x2160)</option>
                  <option value="ultrawide">è¶…å®½å± (3440x1440)</option>
                </select>
              </div>
            </div>
          </div>
          
          <button class="btn-tool" id="cfgBtn" style="margin-top: 16px;">ğŸš€ å¼€å§‹è¯„ä¼°</button>
          <div class="result-box" id="cfgResult"></div>
        </div>
      </div>

      <!-- æ¸¸æˆä»·æ ¼å¯¹æ¯”å·¥å…· -->
      <div class="tool-card">
        <div class="tool-header">
          <div class="tool-icon">ğŸ’°</div>
          <div class="tool-info">
            <div class="tool-title">è·¨å¹³å°ä»·æ ¼å¯¹æ¯”å™¨</div>
            <div class="tool-desc">æœç´¢ä»»æ„æ¸¸æˆï¼Œä¸€é”®å¯¹æ¯”Steamã€Epicã€æ‰æœç­‰å¹³å°ä»·æ ¼</div>
          </div>
        </div>
        <div class="tool-content">
          <div class="input-group">
            <label for="priceGameSearch">ğŸ¯ æœç´¢æ¸¸æˆ</label>
            <div style="position: relative;">
              <input type="text" id="priceGameSearch" placeholder="è¾“å…¥æ¸¸æˆåç§°æœç´¢ (ä¾‹å¦‚: è‰¾å°”ç™»æ³•ç¯, é»‘ç¥è¯æ‚Ÿç©º)" style="width: 100%; padding: 12px; border: 1px solid rgba(56, 189, 248, 0.3); background: rgba(17, 24, 39, 0.8); color: var(--text-soft); border-radius: 8px; font-size: 14px;" />
              <div id="priceSearchResults" style="display: none; position: absolute; top: 100%; left: 0; right: 0; max-height: 300px; overflow-y: auto; background: rgba(17, 24, 39, 0.98); border: 1px solid rgba(56, 189, 248, 0.4); border-radius: 8px; margin-top: 8px; z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);"></div>
            </div>
          </div>
          <div style="margin-top: 12px; padding: 12px; background: rgba(56, 189, 248, 0.05); border-radius: 8px; border-left: 3px solid var(--accent); font-size: 12px; color: var(--text-muted);">
            ğŸ’¡ æç¤ºï¼šè¾“å…¥æ¸¸æˆåç§°åè‡ªåŠ¨æœç´¢ï¼Œç‚¹å‡»æœç´¢ç»“æœå³å¯æŸ¥çœ‹ä»·æ ¼å¯¹æ¯”
          </div>
          <div class="result-box" id="priceResult"></div>
        </div>
      </div>

      <!-- é€šå…³æ—¶é—´è®¡ç®—å™¨ -->
      <div class="tool-card">
        <div class="tool-header">
          <div class="tool-icon">â±ï¸</div>
          <div class="tool-info">
            <div class="tool-title">é€šå…³æ—¶é—´è®¡ç®—å™¨</div>
            <div class="tool-desc">æ ¹æ®æ¸¸æˆæ€»æ—¶é•¿å’Œæ¯æ—¥æ¸¸æˆæ—¶é—´ï¼Œè®¡ç®—é¢„è®¡é€šå…³æ‰€éœ€å¤©æ•°</div>
          </div>
        </div>
        <div class="tool-content">
          <div class="form-grid">
            <div class="input-group">
              <label for="timeTotal">ğŸ“Š æ¸¸æˆæ€»æ—¶é•¿ (å°æ—¶)</label>
              <input id="timeTotal" type="number" min="1" placeholder="ä¾‹å¦‚ï¼š60" />
            </div>
            <div class="input-group">
              <label for="timeDaily">ğŸ® æ¯æ—¥å¯ç©æ—¶é—´ (å°æ—¶)</label>
              <input id="timeDaily" type="number" min="0.5" step="0.5" placeholder="ä¾‹å¦‚ï¼š2" />
            </div>
            <div class="input-group">
              <label for="timeGoal">ğŸ¯ ç›®æ ‡å®Œæˆåº¦</label>
              <select id="timeGoal">
                <option value="1">ä¸»çº¿é€šå…³ (100%)</option>
                <option value="1.5">æ”¯çº¿æ¢ç´¢ (150%)</option>
                <option value="2">å…¨æ”¶é›† (200%)</option>
              </select>
            </div>
          </div>
          <button class="btn-tool" id="timeBtn">â±ï¸ è®¡ç®—æ—¶é—´</button>
          <div class="result-box" id="timeResult"></div>
        </div>
      </div>

      <!-- ä»Šæ™šç©ä»€ä¹ˆ -->
      <div class="tool-card">
        <div class="tool-header">
          <div class="tool-icon">ğŸ²</div>
          <div class="tool-info">
            <div class="tool-title">ä»Šæ™šç©ä»€ä¹ˆï¼Ÿå†³ç­–åŠ©æ‰‹</div>
            <div class="tool-desc">é€‰æ‹©å›°éš¾ç—‡æ•‘æ˜Ÿï¼ä»ä½ çš„æ¸¸æˆåº“ä¸­éšæœºæŠ½å–ä¸€æ¬¾æ¸¸æˆ</div>
          </div>
        </div>
        <div class="tool-content">
          <div style="font-size:13px;color:var(--text-muted);margin-bottom:12px;">
            ğŸ’¡ ç‚¹å‡»æ¸¸æˆå¡ç‰‡æ·»åŠ åˆ°æŠ½å¥–æ± ï¼Œç„¶åæŠ½å–ä»Šæ™šè¦ç©çš„æ¸¸æˆï¼š
          </div>
          <div class="game-pool" id="gamePool"></div>
          <div style="text-align:center;margin-top:20px;">
            <button class="btn-tool" id="randBtn">ğŸ² æŠ½å–æ¸¸æˆ</button>
          </div>
          <div class="result-box" id="randResult"></div>
        </div>
      </div>

      <!-- æ¸¸æˆæ€§ä»·æ¯”åˆ†æ -->
      <div class="tool-card">
        <div class="tool-header">
          <div class="tool-icon">ğŸ“Š</div>
          <div class="tool-info">
            <div class="tool-title">æ¸¸æˆæ€§ä»·æ¯”åˆ†æå™¨</div>
            <div class="tool-desc">ç»¼åˆè¯„ä¼°æ¸¸æˆçš„ä»·æ ¼ã€æ—¶é•¿ã€è¯„åˆ†ï¼Œè®¡ç®—æ€§ä»·æ¯”æŒ‡æ•°</div>
          </div>
        </div>
        <div class="tool-content">
          <div class="form-grid">
            <div class="input-group">
              <label for="valuePrice">ğŸ’° æ¸¸æˆä»·æ ¼ (å…ƒ)</label>
              <input id="valuePrice" type="number" min="0" placeholder="ä¾‹å¦‚ï¼š298" />
            </div>
            <div class="input-group">
              <label for="valueTime">â±ï¸ æ¸¸æˆæ—¶é•¿ (å°æ—¶)</label>
              <input id="valueTime" type="number" min="1" placeholder="ä¾‹å¦‚ï¼š80" />
            </div>
            <div class="input-group">
              <label for="valueRating">â­ è¯„åˆ† (0-10)</label>
              <input id="valueRating" type="number" min="0" max="10" step="0.1" placeholder="ä¾‹å¦‚ï¼š9.2" />
            </div>
          </div>
          <button class="btn-tool" id="valueBtn">ğŸ“Š åˆ†ææ€§ä»·æ¯”</button>
          <div class="result-box" id="valueResult"></div>
        </div>
      </div>

    </section>

    <aside>
      <div class="sidebar-card">
        <div class="sidebar-title">ğŸ¯ ä½¿ç”¨è¯´æ˜</div>
        <div class="sidebar-item">
          <span class="label">å·¥å…·æ€»æ•°</span><span class="value">5 ä¸ª</span>
        </div>
        <div class="sidebar-item">
          <span class="label">æ•°æ®æ¥æº</span><span class="value">æ¨¡æ‹Ÿæ•°æ®</span>
        </div>
        <div class="sidebar-item">
          <span class="label">æ›´æ–°é¢‘ç‡</span><span class="value">å®æ—¶</span>
        </div>
      </div>
      
      <div class="sidebar-card">
        <div class="sidebar-title">ğŸ’¡ è´´å£«</div>
        <div style="font-size:12px;color:var(--text-muted);line-height:1.6;">
          <p>â€¢ é…ç½®è¯„ä¼°ä»…ä¾›å‚è€ƒï¼Œå®é™…è¡¨ç°å› æ¸¸æˆä¼˜åŒ–è€Œå¼‚</p>
          <p>â€¢ ä»·æ ¼å¯¹æ¯”æ•°æ®ä¸ºç¤ºä¾‹ï¼Œå®é™…è¯·ä»¥å¹³å°å®˜ç½‘ä¸ºå‡†</p>
          <p>â€¢ é€šå…³æ—¶é—´åŸºäºå¹³å‡æ•°æ®ï¼Œä¸ªäººä½“éªŒå¯èƒ½ä¸åŒ</p>
          <p>â€¢ å®šæœŸæ›´æ–°æ¸¸æˆåº“ï¼Œè·å¾—æ›´å‡†ç¡®çš„æ¨è</p>
        </div>
      </div>
    </aside>
  </main>
</div>

<script src="common.js"></script>
<script src="cyber-effects.js"></script>
<script>
  initCommon();

  // =============================================
  // 1. é…ç½®ä¼°ç®—å·¥å…· - å…¨æ–°å‡çº§ç‰ˆ
  // =============================================
  
  // çœŸå®ç¡¬ä»¶æ€§èƒ½æ•°æ®åº“ï¼ˆåŸºäºå®é™…æ¸¸æˆæµ‹è¯•æ•°æ®ï¼‰
  const hardwareDatabase = {
    cpu: {
      // Intel å¤„ç†å™¨
      'i9-14900KS': { score: 100, cores: 24, threads: 32, boost: 6.2 },
      'i9-14900K': { score: 98, cores: 24, threads: 32, boost: 6.0 },
      'i9-13900K': { score: 95, cores: 24, threads: 32, boost: 5.8 },
      'i7-14700K': { score: 88, cores: 20, threads: 28, boost: 5.6 },
      'i7-13700K': { score: 85, cores: 16, threads: 24, boost: 5.4 },
      'i5-14600K': { score: 75, cores: 14, threads: 20, boost: 5.3 },
      'i5-13600K': { score: 73, cores: 14, threads: 20, boost: 5.1 },
      'i5-12600K': { score: 68, cores: 10, threads: 16, boost: 4.9 },
      'i5-12400': { score: 60, cores: 6, threads: 12, boost: 4.4 },
      'i3-12100': { score: 45, cores: 4, threads: 8, boost: 4.3 },
      // AMD å¤„ç†å™¨
      'R9 7950X3D': { score: 100, cores: 16, threads: 32, boost: 5.7 },
      'R9 7950X': { score: 96, cores: 16, threads: 32, boost: 5.7 },
      'R9 7900X': { score: 92, cores: 12, threads: 24, boost: 5.4 },
      'R7 7800X3D': { score: 90, cores: 8, threads: 16, boost: 5.0 },
      'R7 7700X': { score: 82, cores: 8, threads: 16, boost: 5.4 },
      'R7 5800X3D': { score: 85, cores: 8, threads: 16, boost: 4.5 },
      'R7 5700X': { score: 70, cores: 8, threads: 16, boost: 4.6 },
      'R5 7600X': { score: 72, cores: 6, threads: 12, boost: 5.3 },
      'R5 5600': { score: 62, cores: 6, threads: 12, boost: 4.4 },
      'R5 5500': { score: 50, cores: 6, threads: 12, boost: 4.2 }
    },
    gpu: {
      // NVIDIA RTX 50 ç³»åˆ—
      'RTX 5090': { score: 200, vram: 32, tdp: 575, dlss: '4.0', raytracing: 'Ultra' },
      'RTX 5080': { score: 160, vram: 16, tdp: 360, dlss: '4.0', raytracing: 'Ultra' },
      'RTX 5070 Ti': { score: 135, vram: 16, tdp: 285, dlss: '4.0', raytracing: 'High' },
      'RTX 5070': { score: 120, vram: 12, tdp: 250, dlss: '4.0', raytracing: 'High' },
      // NVIDIA RTX 40 ç³»åˆ—
      'RTX 4090': { score: 180, vram: 24, tdp: 450, dlss: '3.5', raytracing: 'Ultra' },
      'RTX 4080': { score: 145, vram: 16, tdp: 320, dlss: '3.5', raytracing: 'Ultra' },
      'RTX 4070 Ti': { score: 120, vram: 12, tdp: 285, dlss: '3.0', raytracing: 'High' },
      'RTX 4070': { score: 105, vram: 12, tdp: 200, dlss: '3.0', raytracing: 'High' },
      'RTX 4060 Ti': { score: 85, vram: 8, tdp: 160, dlss: '3.0', raytracing: 'Medium' },
      'RTX 4060': { score: 75, vram: 8, tdp: 115, dlss: '3.0', raytracing: 'Medium' },
      // NVIDIA RTX 30 ç³»åˆ—
      'RTX 3090': { score: 135, vram: 24, tdp: 350, dlss: '2.0', raytracing: 'High' },
      'RTX 3080': { score: 120, vram: 10, tdp: 320, dlss: '2.0', raytracing: 'High' },
      'RTX 3070': { score: 95, vram: 8, tdp: 220, dlss: '2.0', raytracing: 'Medium' },
      'RTX 3060': { score: 70, vram: 12, tdp: 170, dlss: '2.0', raytracing: 'Medium' },
      'RTX 3050': { score: 50, vram: 8, tdp: 130, dlss: '2.0', raytracing: 'Low' },
      // AMD RX 7000 ç³»åˆ—
      'RX 7900 XTX': { score: 155, vram: 24, tdp: 355, dlss: 'FSR 3', raytracing: 'High' },
      'RX 7900 XT': { score: 135, vram: 20, tdp: 315, dlss: 'FSR 3', raytracing: 'High' },
      'RX 7800 XT': { score: 110, vram: 16, tdp: 263, dlss: 'FSR 3', raytracing: 'Medium' },
      'RX 7700 XT': { score: 95, vram: 12, tdp: 245, dlss: 'FSR 3', raytracing: 'Medium' },
      'RX 7600': { score: 72, vram: 8, tdp: 165, dlss: 'FSR 2', raytracing: 'Low' },
      // AMD RX 6000 ç³»åˆ—
      'RX 6800 XT': { score: 115, vram: 16, tdp: 300, dlss: 'FSR 2', raytracing: 'Medium' },
      'RX 6700 XT': { score: 85, vram: 12, tdp: 230, dlss: 'FSR 2', raytracing: 'Low' },
      'RX 6600 XT': { score: 70, vram: 8, tdp: 160, dlss: 'FSR 2', raytracing: 'Low' },
      'RX 6500 XT': { score: 45, vram: 4, tdp: 107, dlss: 'FSR 2', raytracing: 'None' }
    }
  };

  // DOM å…ƒç´ 
  const detectBtn = document.getElementById("detectBtn");
  const manualBtn = document.getElementById("manualBtn");
  const detectedInfo = document.getElementById("detectedInfo");
  const detectedSpecs = document.getElementById("detectedSpecs");
  const manualForm = document.getElementById("manualForm");
  const autoForm = document.getElementById("autoForm");
  const cfgBtn = document.getElementById("cfgBtn");
  const cfgResult = document.getElementById("cfgResult");
  
  let currentMode = 'auto'; // 'auto' æˆ– 'manual'
  let detectedHardware = null;

  // ç¡¬ä»¶æ£€æµ‹åŠŸèƒ½ - å¢å¼ºç‰ˆ
  detectBtn.addEventListener("click", async () => {
    detectBtn.disabled = true;
    detectBtn.innerHTML = '<span style="animation: pulse 0.5s infinite;">ğŸ” æ­£åœ¨æ‰§è¡Œç²¾å‡†æ£€æµ‹...</span>';
    
    try {
      const hardware = await detectHardwareSpecs();
      detectedHardware = hardware;
      
      // æ„å»ºè¯¦ç»†çš„æ£€æµ‹ç»“æœæ˜¾ç¤º
      const gpuMatchStatus = hardware.gpuMatched 
        ? '<span style="color: #00ff88;">âœ… ç²¾ç¡®åŒ¹é…</span>' 
        : '<span style="color: #ffb800;">âš ï¸ æ™ºèƒ½ä¼°ç®—</span>';
      
      let specsHTML = '<div style="display: grid; gap: 12px;">';
      
      // CPUä¿¡æ¯
      specsHTML += `
        <div style="padding: 12px; background: rgba(0, 204, 255, 0.1); border-radius: 8px; border-left: 3px solid #00ccff;">
          <div style="font-size: 12px; color: #64748b; margin-bottom: 4px;">ğŸ–¥ï¸ CPU å¤„ç†å™¨</div>
          <div style="font-size: 14px; color: var(--text-main); font-weight: 600;">${hardware.cpu}</div>
          <div style="font-size: 11px; color: #94a3b8; margin-top: 4px;">
            æ ¸å¿ƒæ•°: ${hardware.cpuCores} | æ€§èƒ½åˆ†æ•°: <span style="color: #00ff88; font-weight: bold;">${hardware.cpuScore}/100</span>
            ${hardware.cpuArch ? ` | æ¶æ„: ${hardware.cpuArch}` : ''}
          </div>
        </div>`;
      
      // GPUä¿¡æ¯
      specsHTML += `
        <div style="padding: 12px; background: rgba(0, 255, 136, 0.1); border-radius: 8px; border-left: 3px solid #00ff88;">
          <div style="font-size: 12px; color: #64748b; margin-bottom: 4px;">ğŸ® GPU æ˜¾å¡ ${gpuMatchStatus}</div>
          <div style="font-size: 14px; color: var(--text-main); font-weight: 600;">${hardware.gpu}</div>
          <div style="font-size: 11px; color: #94a3b8; margin-top: 4px;">
            æ€§èƒ½åˆ†æ•°: <span style="color: #00ccff; font-weight: bold;">${hardware.gpuScore}/200</span>
            ${hardware.gpuVendor ? ` | å‚å•†: ${hardware.gpuVendor}` : ''}
          </div>
          ${hardware.gpuRaw && hardware.gpuRaw !== hardware.gpu ? `<div style="font-size: 10px; color: #475569; margin-top: 4px;">åŸå§‹: ${hardware.gpuRaw}</div>` : ''}
        </div>`;
      
      // å†…å­˜å’Œæ˜¾ç¤ºå™¨
      specsHTML += `
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
          <div style="padding: 12px; background: rgba(255, 184, 0, 0.1); border-radius: 8px; border-left: 3px solid #ffb800;">
            <div style="font-size: 12px; color: #64748b; margin-bottom: 4px;">ğŸ’¾ ç³»ç»Ÿå†…å­˜</div>
            <div style="font-size: 14px; color: var(--text-main); font-weight: 600;">${hardware.ram} GB</div>
          </div>
          <div style="padding: 12px; background: rgba(168, 85, 247, 0.1); border-radius: 8px; border-left: 3px solid #a855f7;">
            <div style="font-size: 12px; color: #64748b; margin-bottom: 4px;">ğŸ–¥ï¸ æ˜¾ç¤ºå™¨</div>
            <div style="font-size: 14px; color: var(--text-main); font-weight: 600;">${hardware.screenRes}</div>
          </div>
        </div>`;
      
      specsHTML += '</div>';
      
      // æ£€æµ‹æ–¹æ³•è¯´æ˜
      specsHTML += `
        <div style="margin-top: 12px; padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 11px; color: #94a3b8;">
          <span style="color: #3b82f6;">â„¹ï¸ æ£€æµ‹æŠ€æœ¯:</span> WebGL UNMASKED_RENDERER + CPUåŸºå‡†æµ‹è¯• + User-Agent Client Hints
        </div>`;
      
      detectedSpecs.innerHTML = specsHTML;
      detectedInfo.style.display = 'block';
      
      detectBtn.innerHTML = 'âœ… æ£€æµ‹å®Œæˆ - ç‚¹å‡»é‡æ–°æ£€æµ‹';
      setTimeout(() => {
        detectBtn.innerHTML = 'ğŸ” é‡æ–°æ£€æµ‹é…ç½®';
        detectBtn.disabled = false;
      }, 2000);
    } catch (error) {
      detectBtn.innerHTML = 'âŒ æ£€æµ‹å¤±è´¥';
      detectedSpecs.innerHTML = `<span style="color:var(--danger);">æ£€æµ‹å¤±è´¥: ${error.message}<br/>è¯·å°è¯•æ‰‹åŠ¨è¾“å…¥é…ç½®</span>`;
      detectedInfo.style.display = 'block';
      setTimeout(() => {
        detectBtn.innerHTML = 'ğŸ” è‡ªåŠ¨æ£€æµ‹é…ç½®';
        detectBtn.disabled = false;
      }, 3000);
    }
  });
  
  // æ‰‹åŠ¨è¾“å…¥åˆ‡æ¢
  manualBtn.addEventListener("click", () => {
    currentMode = currentMode === 'auto' ? 'manual' : 'auto';
    if (currentMode === 'manual') {
      manualForm.style.display = 'block';
      autoForm.style.display = 'none';
      manualBtn.textContent = 'ğŸ“Š åˆ‡æ¢åˆ°å¿«é€Ÿé€‰æ‹©';
      manualBtn.style.background = 'rgba(56, 189, 248, 0.1)';
      manualBtn.style.borderColor = 'var(--accent)';
      manualBtn.style.color = 'var(--accent)';
    } else {
      manualForm.style.display = 'none';
      autoForm.style.display = 'block';
      manualBtn.textContent = 'âœï¸ æ‰‹åŠ¨è¾“å…¥';
      manualBtn.style.background = 'rgba(255, 211, 0, 0.1)';
      manualBtn.style.borderColor = 'var(--warning)';
      manualBtn.style.color = 'var(--warning)';
    }
  });
  
  // =============================================
  // ğŸ¯ ç²¾å‡†ç¡¬ä»¶æ£€æµ‹ç³»ç»Ÿ - ç»ˆæå¢å¼ºç‰ˆ
  // =============================================
  
  // ç²¾å‡†GPUå‹å·è¯†åˆ« - ä»WebGL rendererå­—ç¬¦ä¸²è§£æ
  function parseGPUModel(rendererString) {
    // æ‰©å±•çš„GPUåŒ¹é…è§„åˆ™ (æŒ‰ä¼˜å…ˆçº§æ’åº)
    const gpuPatterns = [
      // NVIDIA RTX 50ç³»åˆ—
      { pattern: /rtx\s*5090/i, name: 'RTX 5090', score: 200 },
      { pattern: /rtx\s*5080/i, name: 'RTX 5080', score: 160 },
      { pattern: /rtx\s*5070\s*ti/i, name: 'RTX 5070 Ti', score: 135 },
      { pattern: /rtx\s*5070(?!\s*ti)/i, name: 'RTX 5070', score: 120 },
      { pattern: /rtx\s*5060\s*ti/i, name: 'RTX 5060 Ti', score: 95 },
      { pattern: /rtx\s*5060(?!\s*ti)/i, name: 'RTX 5060', score: 80 },
      // NVIDIA RTX 40ç³»åˆ—
      { pattern: /rtx\s*4090/i, name: 'RTX 4090', score: 180 },
      { pattern: /rtx\s*4080\s*super/i, name: 'RTX 4080 Super', score: 155 },
      { pattern: /rtx\s*4080(?!\s*super)/i, name: 'RTX 4080', score: 145 },
      { pattern: /rtx\s*4070\s*ti\s*super/i, name: 'RTX 4070 Ti Super', score: 130 },
      { pattern: /rtx\s*4070\s*ti(?!\s*super)/i, name: 'RTX 4070 Ti', score: 120 },
      { pattern: /rtx\s*4070\s*super/i, name: 'RTX 4070 Super', score: 115 },
      { pattern: /rtx\s*4070(?!\s*(ti|super))/i, name: 'RTX 4070', score: 105 },
      { pattern: /rtx\s*4060\s*ti/i, name: 'RTX 4060 Ti', score: 85 },
      { pattern: /rtx\s*4060(?!\s*ti)/i, name: 'RTX 4060', score: 75 },
      // NVIDIA RTX 30ç³»åˆ—
      { pattern: /rtx\s*3090\s*ti/i, name: 'RTX 3090 Ti', score: 140 },
      { pattern: /rtx\s*3090(?!\s*ti)/i, name: 'RTX 3090', score: 135 },
      { pattern: /rtx\s*3080\s*ti/i, name: 'RTX 3080 Ti', score: 125 },
      { pattern: /rtx\s*3080(?!\s*ti)/i, name: 'RTX 3080', score: 120 },
      { pattern: /rtx\s*3070\s*ti/i, name: 'RTX 3070 Ti', score: 100 },
      { pattern: /rtx\s*3070(?!\s*ti)/i, name: 'RTX 3070', score: 95 },
      { pattern: /rtx\s*3060\s*ti/i, name: 'RTX 3060 Ti', score: 82 },
      { pattern: /rtx\s*3060(?!\s*ti)/i, name: 'RTX 3060', score: 70 },
      { pattern: /rtx\s*3050/i, name: 'RTX 3050', score: 50 },
      // NVIDIA GTX 16ç³»åˆ—
      { pattern: /gtx\s*1660\s*super/i, name: 'GTX 1660 Super', score: 48 },
      { pattern: /gtx\s*1660\s*ti/i, name: 'GTX 1660 Ti', score: 45 },
      { pattern: /gtx\s*1660(?!\s*(super|ti))/i, name: 'GTX 1660', score: 42 },
      { pattern: /gtx\s*1650\s*super/i, name: 'GTX 1650 Super', score: 38 },
      { pattern: /gtx\s*1650(?!\s*super)/i, name: 'GTX 1650', score: 32 },
      // NVIDIA GTX 10ç³»åˆ—
      { pattern: /gtx\s*1080\s*ti/i, name: 'GTX 1080 Ti', score: 60 },
      { pattern: /gtx\s*1080(?!\s*ti)/i, name: 'GTX 1080', score: 52 },
      { pattern: /gtx\s*1070\s*ti/i, name: 'GTX 1070 Ti', score: 48 },
      { pattern: /gtx\s*1070(?!\s*ti)/i, name: 'GTX 1070', score: 44 },
      { pattern: /gtx\s*1060/i, name: 'GTX 1060', score: 35 },
      { pattern: /gtx\s*1050\s*ti/i, name: 'GTX 1050 Ti', score: 25 },
      { pattern: /gtx\s*1050(?!\s*ti)/i, name: 'GTX 1050', score: 20 },
      // AMD RX 7000ç³»åˆ—
      { pattern: /rx\s*7900\s*xtx/i, name: 'RX 7900 XTX', score: 155 },
      { pattern: /rx\s*7900\s*xt(?!x)/i, name: 'RX 7900 XT', score: 135 },
      { pattern: /rx\s*7900\s*gre/i, name: 'RX 7900 GRE', score: 120 },
      { pattern: /rx\s*7800\s*xt/i, name: 'RX 7800 XT', score: 110 },
      { pattern: /rx\s*7700\s*xt/i, name: 'RX 7700 XT', score: 95 },
      { pattern: /rx\s*7600\s*xt/i, name: 'RX 7600 XT', score: 80 },
      { pattern: /rx\s*7600(?!\s*xt)/i, name: 'RX 7600', score: 72 },
      // AMD RX 6000ç³»åˆ—
      { pattern: /rx\s*6950\s*xt/i, name: 'RX 6950 XT', score: 130 },
      { pattern: /rx\s*6900\s*xt/i, name: 'RX 6900 XT', score: 125 },
      { pattern: /rx\s*6800\s*xt/i, name: 'RX 6800 XT', score: 115 },
      { pattern: /rx\s*6800(?!\s*xt)/i, name: 'RX 6800', score: 100 },
      { pattern: /rx\s*6750\s*xt/i, name: 'RX 6750 XT', score: 88 },
      { pattern: /rx\s*6700\s*xt/i, name: 'RX 6700 XT', score: 85 },
      { pattern: /rx\s*6650\s*xt/i, name: 'RX 6650 XT', score: 72 },
      { pattern: /rx\s*6600\s*xt/i, name: 'RX 6600 XT', score: 70 },
      { pattern: /rx\s*6600(?!\s*xt)/i, name: 'RX 6600', score: 62 },
      { pattern: /rx\s*6500\s*xt/i, name: 'RX 6500 XT', score: 45 },
      // AMD RX 5000ç³»åˆ—
      { pattern: /rx\s*5700\s*xt/i, name: 'RX 5700 XT', score: 70 },
      { pattern: /rx\s*5700(?!\s*xt)/i, name: 'RX 5700', score: 62 },
      { pattern: /rx\s*5600\s*xt/i, name: 'RX 5600 XT', score: 55 },
      { pattern: /rx\s*5500\s*xt/i, name: 'RX 5500 XT', score: 42 },
      // Intel Arcç³»åˆ—
      { pattern: /arc\s*a770/i, name: 'Arc A770', score: 82 },
      { pattern: /arc\s*a750/i, name: 'Arc A750', score: 72 },
      { pattern: /arc\s*a580/i, name: 'Arc A580', score: 55 },
      { pattern: /arc\s*a380/i, name: 'Arc A380', score: 30 },
      // Intelé›†æˆæ˜¾å¡
      { pattern: /iris\s*xe/i, name: 'Intel Iris Xe', score: 18 },
      { pattern: /uhd\s*(770|graphics\s*770)/i, name: 'Intel UHD 770', score: 12 },
      { pattern: /uhd\s*(730|graphics\s*730)/i, name: 'Intel UHD 730', score: 10 },
      { pattern: /uhd\s*graphics/i, name: 'Intel UHD Graphics', score: 8 },
      // AMDé›†æˆæ˜¾å¡
      { pattern: /radeon\s*780m/i, name: 'AMD Radeon 780M', score: 35 },
      { pattern: /radeon\s*760m/i, name: 'AMD Radeon 760M', score: 28 },
      { pattern: /radeon\s*680m/i, name: 'AMD Radeon 680M', score: 25 },
      { pattern: /vega\s*8/i, name: 'AMD Vega 8', score: 15 },
      { pattern: /vega\s*7/i, name: 'AMD Vega 7', score: 12 }
    ];
    
    // å°è¯•åŒ¹é…
    for (const gpu of gpuPatterns) {
      if (gpu.pattern.test(rendererString)) {
        console.log('[GPUæ£€æµ‹] ç²¾ç¡®åŒ¹é…:', gpu.name, 'åˆ†æ•°:', gpu.score);
        return { name: gpu.name, score: gpu.score, matched: true };
      }
    }
    
    // é€šç”¨åˆ†æ•°ä¼°ç®—
    const str = rendererString.toLowerCase();
    let estimatedScore = 40;
    if (str.includes('nvidia') || str.includes('geforce')) {
      if (str.includes('rtx')) estimatedScore = 70;
      else if (str.includes('gtx')) estimatedScore = 40;
    } else if (str.includes('amd') || str.includes('radeon')) {
      if (str.includes('rx')) estimatedScore = 60;
      else estimatedScore = 20;
    } else if (str.includes('intel')) {
      if (str.includes('arc')) estimatedScore = 55;
      else if (str.includes('iris')) estimatedScore = 18;
      else estimatedScore = 10;
    }
    
    console.log('[GPUæ£€æµ‹] æœªç²¾ç¡®åŒ¹é…, ä¼°ç®—åˆ†æ•°:', estimatedScore);
    return { name: rendererString, score: estimatedScore, matched: false };
  }
  
  // CPUæ€§èƒ½åŸºå‡†æµ‹è¯•
  async function runCPUBenchmark() {
    const iterations = 50000;
    const startTime = performance.now();
    
    let result = 0;
    for (let i = 0; i < iterations; i++) {
      result += Math.sqrt(i) * Math.sin(i) * Math.cos(i);
    }
    
    const duration = performance.now() - startTime;
    
    // è½¬æ¢ä¸ºåˆ†æ•° (è¶Šå¿«è¶Šé«˜)
    let score;
    if (duration <= 30) score = 100;
    else if (duration <= 50) score = 90;
    else if (duration <= 80) score = 80;
    else if (duration <= 120) score = 70;
    else if (duration <= 180) score = 60;
    else if (duration <= 250) score = 50;
    else if (duration <= 350) score = 40;
    else score = 30;
    
    console.log('[CPUåŸºå‡†æµ‹è¯•] è€—æ—¶:', duration.toFixed(2), 'ms, åˆ†æ•°:', score);
    return score;
  }
  
  // ç²¾å‡†ç¡¬ä»¶æ£€æµ‹å‡½æ•°
  async function detectHardwareSpecs() {
    const specs = {
      cpu: 'Unknown',
      cpuCores: 0,
      cpuScore: 50,
      gpu: 'Unknown',
      gpuScore: 50,
      gpuMatched: false,
      ram: 0,
      platform: navigator.platform || 'Unknown',
      screenRes: `${screen.width}x${screen.height}`
    };
    
    // 1. ç²¾å‡†CPUæ£€æµ‹
    const cores = navigator.hardwareConcurrency || 4;
    specs.cpuCores = cores;
    
    // æ‰§è¡ŒCPUåŸºå‡†æµ‹è¯•
    const benchScore = await runCPUBenchmark();
    
    // ç»¼åˆè¯„åˆ† (æ ¸å¿ƒæ•°æƒé‡40%, åŸºå‡†æµ‹è¯•æƒé‡60%)
    let coreScore;
    if (cores >= 24) coreScore = 100;
    else if (cores >= 16) coreScore = 88;
    else if (cores >= 12) coreScore = 75;
    else if (cores >= 8) coreScore = 62;
    else if (cores >= 6) coreScore = 50;
    else if (cores >= 4) coreScore = 40;
    else coreScore = 25;
    
    specs.cpuScore = Math.round(coreScore * 0.4 + benchScore * 0.6);
    
    // æ ¹æ®ç»¼åˆåˆ†æ•°æ¨æ–­CPUçº§åˆ«
    if (specs.cpuScore >= 90) {
      specs.cpu = `æ——èˆ°çº§å¤„ç†å™¨ (${cores}æ ¸å¿ƒ, æ€§èƒ½åˆ†: ${specs.cpuScore})`;
    } else if (specs.cpuScore >= 75) {
      specs.cpu = `é«˜ç«¯å¤„ç†å™¨ (${cores}æ ¸å¿ƒ, æ€§èƒ½åˆ†: ${specs.cpuScore})`;
    } else if (specs.cpuScore >= 60) {
      specs.cpu = `ä¸»æµå¤„ç†å™¨ (${cores}æ ¸å¿ƒ, æ€§èƒ½åˆ†: ${specs.cpuScore})`;
    } else if (specs.cpuScore >= 45) {
      specs.cpu = `ä¸­ç«¯å¤„ç†å™¨ (${cores}æ ¸å¿ƒ, æ€§èƒ½åˆ†: ${specs.cpuScore})`;
    } else {
      specs.cpu = `å…¥é—¨å¤„ç†å™¨ (${cores}æ ¸å¿ƒ, æ€§èƒ½åˆ†: ${specs.cpuScore})`;
    }
    
    // å°è¯•è·å–æ›´å¤šCPUä¿¡æ¯
    try {
      if (navigator.userAgentData && navigator.userAgentData.getHighEntropyValues) {
        const hints = await navigator.userAgentData.getHighEntropyValues(['architecture', 'bitness', 'platform']);
        specs.cpuArch = `${hints.platform} ${hints.architecture} ${hints.bitness}bit`;
      }
    } catch (e) {
      console.log('[CPUæ£€æµ‹] User-Agent Client Hintsä¸å¯ç”¨');
    }
    
    // 2. ç²¾å‡†GPUæ£€æµ‹
    try {
      const canvas = document.createElement('canvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (gl) {
        const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
        if (debugInfo) {
          const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
          const vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
          
          // ç²¾å‡†è§£æGPUå‹å·
          const gpuInfo = parseGPUModel(renderer);
          specs.gpu = gpuInfo.name;
          specs.gpuScore = gpuInfo.score;
          specs.gpuMatched = gpuInfo.matched;
          specs.gpuRaw = renderer;
          specs.gpuVendor = vendor;
        } else {
          specs.gpu = gl.getParameter(gl.RENDERER);
          const gpuInfo = parseGPUModel(specs.gpu);
          specs.gpuScore = gpuInfo.score;
        }
      }
    } catch (e) {
      specs.gpu = 'æ— æ³•æ£€æµ‹ GPU';
      specs.gpuScore = 40;
    }
    
    // 3. å†…å­˜æ£€æµ‹
    if (navigator.deviceMemory) {
      specs.ram = navigator.deviceMemory;
      // deviceMemory API æœ‰ä¸Šé™é™åˆ¶(é€šå¸¸8GB), å°è¯•è¿›ä¸€æ­¥ä¼°ç®—
      if (specs.ram >= 8) {
        try {
          if (performance.memory && performance.memory.jsHeapSizeLimit) {
            const heapLimit = performance.memory.jsHeapSizeLimit;
            if (heapLimit > 4 * 1024 * 1024 * 1024) specs.ram = 32;
            else if (heapLimit > 2 * 1024 * 1024 * 1024) specs.ram = 16;
          }
        } catch (e) {}
      }
    } else {
      specs.ram = 8; // é»˜è®¤ä¼°ç®—
    }
    
    // 4. æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡æ£€æµ‹
    const dpr = window.devicePixelRatio || 1;
    const realWidth = Math.round(screen.width * dpr);
    const realHeight = Math.round(screen.height * dpr);
    specs.screenRes = `${screen.width}x${screen.height}`;
    if (dpr > 1) {
      specs.screenRes += ` (ç‰©ç†: ${realWidth}x${realHeight})`;
    }
    
    console.log('[ç¡¬ä»¶æ£€æµ‹å®Œæˆ]', specs);
    return specs;
  }
  
  // è¯„ä¼°æŒ‰é’®äº‹ä»¶ - æ”¯æŒæ£€æµ‹ç»“æœ
  cfgBtn.addEventListener("click", () => {
    let cpuScore, gpuScore, ram, resolution;
    let cpuName, gpuName;
    let useDetectedHardware = false;
    
    // ä¼˜å…ˆä½¿ç”¨æ£€æµ‹åˆ°çš„ç¡¬ä»¶é…ç½®
    if (detectedHardware && detectedHardware.cpuScore && detectedHardware.gpuScore) {
      useDetectedHardware = true;
      cpuName = detectedHardware.cpu;
      cpuScore = detectedHardware.cpuScore;
      gpuName = detectedHardware.gpu;
      gpuScore = detectedHardware.gpuScore;
      ram = detectedHardware.ram || 16;
      
      // æ ¹æ®å±å¹•åˆ†è¾¨ç‡è‡ªåŠ¨åˆ¤æ–­
      const screenWidth = screen.width * (window.devicePixelRatio || 1);
      if (screenWidth >= 3840) resolution = '2160';
      else if (screenWidth >= 2560) resolution = '1440';
      else resolution = '1080';
      
      console.log('[è¯„ä¼°] ä½¿ç”¨æ£€æµ‹é…ç½® - CPU:', cpuScore, 'GPU:', gpuScore);
    } else if (currentMode === 'manual') {
      // æ‰‹åŠ¨è¾“å…¥æ¨¡å¼
      const manualCpuInput = document.getElementById("manualCpuInput");
      const manualGpuInput = document.getElementById("manualGpuInput");
      const manualRamInput = document.getElementById("manualRamInput");
      const manualResolution = document.getElementById("manualResolution");
      
      const cpuInput = manualCpuInput.value.trim();
      const gpuInput = manualGpuInput.value.trim();
      ram = parseInt(manualRamInput.value) || 16;
      resolution = manualResolution.value;
      
      if (!cpuInput || !gpuInput) {
        alert('è¯·è¾“å…¥ CPU å’Œ GPU å‹å·');
        return;
      }
      
      // åŒ¹é…CPU
      cpuName = cpuInput;
      cpuScore = matchHardware(cpuInput, hardwareDatabase.cpu);
      
      // åŒ¹é…GPU
      gpuName = gpuInput;
      gpuScore = matchHardware(gpuInput, hardwareDatabase.gpu);
      
    } else {
      // è‡ªåŠ¨æ¨¡å¼
      const cfgCpu = document.getElementById("cfgCpu");
      const cfgGpu = document.getElementById("cfgGpu");
      const cfgRam = document.getElementById("cfgRam");
      const cfgResolution = document.getElementById("cfgResolution");
      
      const cpu = cfgCpu.value;
      const gpu = cfgGpu.value;
      ram = parseInt(cfgRam.value);
      resolution = cfgResolution.value;
      
      // æ˜ å°„åˆ°å®é™…ç¡¬ä»¶åç§°å’Œåˆ†æ•°
      const cpuMapping = {
        budget: { name: 'i3-12100', score: 45 },
        low: { name: 'i5-12400', score: 60 },
        mid: { name: 'i5-13600K', score: 73 },
        high: { name: 'i7-14700K', score: 88 },
        ultra: { name: 'i9-14900K', score: 98 },
        'next-gen': { name: 'i9-14900KS', score: 100 }
      };
      const gpuMapping = {
        budget: { name: 'RTX 3050', score: 50 },
        low: { name: 'RTX 4060', score: 75 },
        mid: { name: 'RTX 4060 Ti', score: 85 },
        high: { name: 'RTX 4070 Ti', score: 120 },
        ultra: { name: 'RTX 4090', score: 180 },
        'rtx50-high': { name: 'RTX 5070 Ti', score: 135 },
        'rtx50-ultra': { name: 'RTX 5090', score: 200 }
      };
      
      cpuName = cpuMapping[cpu].name;
      cpuScore = cpuMapping[cpu].score;
      gpuName = gpuMapping[gpu].name;
      gpuScore = gpuMapping[gpu].score;
    }
    
    // è®¡ç®—æ€»åˆ† (åŸºäºçœŸå®æ€§èƒ½æ•°æ®)
    let totalScore = cpuScore + gpuScore;
    
    // åˆ†è¾¨ç‡æƒ©ç½šç³»æ•°
    const resMultiplier = { '1080': 1, '1440': 0.65, '2160': 0.45, 'ultrawide': 0.60 };
    totalScore = totalScore * resMultiplier[resolution];
    
    // å†…å­˜åŠ æˆ
    if (ram >= 32) totalScore += 15;
    else if (ram >= 16) totalScore += 5;
    else if (ram < 8) totalScore -= 15;
    
    // è·å–GPUç‰¹æ€§
    const gpuData = hardwareDatabase.gpu[gpuName] || { dlss: 'None', raytracing: 'None', vram: 8 };
    const dlssVersion = gpuData.dlss;
    const raytracingLevel = gpuData.raytracing;
    
    // åŸºäºæ€»åˆ†è¯„ä¼°æ€§èƒ½
    let quality, fpsRange, raytracing, details, dlss;
    let score = totalScore;
    // çœŸå®æ€§èƒ½è¯„ä¼°ï¼ˆåŸºäºå®é™…æ¸¸æˆæµ‹è¯•æ•°æ®ï¼‰
    if (score >= 120) {
      quality = "è¶…æè‡´";
      fpsRange = "144-240 FPS";
      raytracing = dlssVersion === '4.0' ? "âœ… å…¨ç¨‹å…‰è¿½ + DLSS 4.0 å¤šå¸§ç”Ÿæˆ" : "âœ… å…¨ç¨‹å…‰è¿½ + è·¯å¾„è¿½è¸ª";
      dlss = dlssVersion === '4.0' ? "ğŸš€ DLSS 4.0 + å¤šå¸§ç”Ÿæˆ" : "ğŸ¯ DLSS 3.5 + å¸§ç”Ÿæˆ";
      details = `æ¬¡ä¸–ä»£æ——èˆ°é…ç½®ï¼åœ¨ã€Šèµ›åšæœ‹å…‹2077ã€‹è·¯å¾„è¿½è¸ªæ¨¡å¼ä¸‹å¯è¾¾60+ FPSï¼Œã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹4Kæœ€é«˜ç”»è´¨ç¨³å®š80+ FPSï¼Œã€Šè‰¾å°”ç™»æ³•ç¯ã€‹å¯è¾¾144+ FPSã€‚`;
    } else if (score >= 95) {
      quality = "æè‡´";
      fpsRange = "120-144 FPS";
      raytracing = "âœ… å…¨å¼€å…‰è¿½ç‰¹æ•ˆ";
      dlss = dlssVersion.includes('3') ? "âš¡ DLSS 3.0/FSR 3" : "ğŸ’« DLSS 2.0/FSR 2";
      details = `æ——èˆ°çº§é…ç½®ï¼ã€Šèµ›åšæœ‹å…‹2077ã€‹è¶…çº§å…‰è¿½å¯è¾¾70+ FPSï¼Œã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹4Ké«˜ç”»è´¨80+ FPSï¼Œã€Šéœæ ¼æ²ƒèŒ¨ä¹‹é—ã€‹4Kæé«˜ç”»è´¨æµç•…è¿è¡Œã€‚`;
    } else if (score >= 75) {
      quality = "æé«˜";
      fpsRange = "90-120 FPS";
      raytracing = "âœ… é«˜çº§å…‰è¿½";
      dlss = raytracingLevel !== 'None' ? "âš¡ æ”¯æŒ DLSS/FSR" : "ğŸ”§ FSR æ€§èƒ½æ¨¡å¼";
      details = `é«˜ç«¯é…ç½®ï¼ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹2Kæé«˜ç”»è´¨å¯è¾¾100+ FPSï¼Œã€Šåšå¾·ä¹‹é—¨3ã€‹4Ké«˜ç”»è´¨æµç•…ï¼Œã€Šæ€ªç‰©çŒäººï¼šä¸–ç•Œã€‹2Kæé«˜è®¾ç½®120 FPSã€‚`;
    } else if (score >= 55) {
      quality = "é«˜";
      fpsRange = "60-90 FPS";
      raytracing = raytracingLevel === 'Medium' || raytracingLevel === 'High' ? "âœ… éƒ¨åˆ†å…‰è¿½" : "âš ï¸ å…³é—­å…‰è¿½";
      dlss = "ğŸ’« å»ºè®®å¼€å¯ DLSS/FSR";
      details = `ä¸»æµé…ç½®ï¼ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹2Ké«˜ç”»è´¨ç¨³å®š60+ FPSï¼Œã€Šåªç‹¼ã€‹1080pæé«˜ç”»è´¨æµç•…ï¼Œå¤§éƒ¨åˆ†æ¸¸æˆ1080pé«˜ç”»è´¨å¯è¾¾90+ FPSã€‚`;
    } else if (score >= 40) {
      quality = "ä¸­é«˜";
      fpsRange = "45-60 FPS";
      raytracing = "âš ï¸ å»ºè®®å…³é—­å…‰è¿½";
      dlss = "ğŸ”§ å¼€å¯æ€§èƒ½æ¨¡å¼";
      details = `ä¸»æµå…¥é—¨é…ç½®ï¼1080pä¸­é«˜ç”»è´¨è¿è¡Œå¤§éƒ¨åˆ†æ¸¸æˆï¼Œã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹1080pä¸­ç”»è´¨çº¦45 FPSï¼Œã€Šè‰¾å°”ç™»æ³•ç¯ã€‹1080pé«˜ç”»è´¨60 FPSã€‚`;
    } else if (score >= 25) {
      quality = "ä¸­";
      fpsRange = "30-45 FPS";
      raytracing = "âŒ ä¸æ”¯æŒå…‰è¿½";
      dlss = "âš ï¸ æ€§èƒ½ä¼˜åŒ–å¿…å¼€";
      details = `å…¥é—¨é…ç½®ï¼1080pä¸­ç”»è´¨è¿è¡Œä¸»æµæ¸¸æˆï¼Œæ¨èç©ã€ŠCS2ã€‹ã€ã€ŠDota 2ã€‹ç­‰ç«æŠ€æ¸¸æˆï¼Œæˆ–è¾ƒè€çš„3Aå¤§ä½œé™ä½ç”»è´¨ã€‚`;
    } else {
      quality = "ä½";
      fpsRange = "ä½äº30 FPS";
      raytracing = "âŒ ä¸æ”¯æŒå…‰è¿½";
      dlss = "âŒ æ€§èƒ½ä¸¥é‡å—é™";
      details = `åŸºç¡€é…ç½®ï¼å»ºè®®ç©ç‹¬ç«‹æ¸¸æˆã€åƒç´ æ¸¸æˆæˆ–è€æ¸¸æˆã€‚3Aå¤§ä½œéœ€å¤§å¹…é™ä½ç”»è´¨å’Œåˆ†è¾¨ç‡ã€‚`;
    }
    
    const hardware = `${cpuName} + ${gpuName}`;
    const resolutionText = resolution === '1080' ? '1080p' : resolution === '1440' ? '2K' : resolution === '2160' ? '4K' : 'è¶…å®½';
    
    cfgResult.innerHTML = `
      <div style="text-align:center;margin-bottom:20px;">
        <div style="font-size:36px;font-weight:900;color:var(--accent);font-family:'Orbitron',sans-serif;text-shadow: 0 0 20px rgba(56, 189, 248, 0.5);">${quality}</div>
        <div style="font-size:14px;color:var(--text-muted);margin-top:4px;">æ¨èç”»è´¨ç­‰çº§ (åŸºäºçœŸå®æ€§èƒ½æ•°æ®)</div>
        <div style="font-size:12px;color:var(--text-muted);margin-top:8px;font-family:'Orbitron',sans-serif;">ğŸ’» ${hardware}</div>
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" style="font-size: 20px;">${fpsRange}</div>
          <div class="stat-label">é¢„æœŸå¸§ç‡èŒƒå›´</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${resolutionText}</div>
          <div class="stat-label">ç›®æ ‡åˆ†è¾¨ç‡</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${ram}GB</div>
          <div class="stat-label">ç³»ç»Ÿå†…å­˜</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${Math.round(score)}</div>
          <div class="stat-label">ç»¼åˆè¯„åˆ†</div>
        </div>
      </div>
      <div style="margin-top:16px;padding:14px;background:rgba(56,189,248,0.1);border-radius:8px;border-left:4px solid var(--accent);">
        <div style="font-size:13px;font-weight:700;color:var(--accent);margin-bottom:8px;">ğŸ¯ ${raytracing}</div>
        <div style="font-size:13px;font-weight:600;color:var(--warning);margin-bottom:8px;">âš¡ ${dlss}</div>
        <div style="font-size:13px;color:var(--text-soft);line-height:1.7;margin-top:10px;">ğŸ“Š ${details}</div>
      </div>
      <div style="margin-top:12px;padding:10px;background:rgba(255,211,0,0.05);border-radius:6px;border-left:3px solid var(--warning);">
        <div style="font-size:11px;color:var(--text-muted);line-height:1.5;">
          ğŸ’¡ æ•°æ®æ¥æºï¼šåŸºäºã€Šèµ›åšæœ‹å…‹2077ã€‹ã€ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ã€ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹ç­‰æ¸¸æˆçš„å®é™…æ€§èƒ½æµ‹è¯•
        </div>
      </div>
    `;
    cfgResult.classList.add('show');
  });
  
  // ç¡¬ä»¶åŒ¹é…å‡½æ•°ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
  function matchHardware(input, database) {
    const inputLower = input.toLowerCase().replace(/[^a-z0-9]/g, '');
    
    // ç²¾ç¡®åŒ¹é…
    for (const [key, value] of Object.entries(database)) {
      if (key.toLowerCase().replace(/[^a-z0-9]/g, '') === inputLower) {
        return value.score;
      }
    }
    
    // éƒ¨åˆ†åŒ¹é…
    for (const [key, value] of Object.entries(database)) {
      const keyLower = key.toLowerCase().replace(/[^a-z0-9]/g, '');
      if (keyLower.includes(inputLower) || inputLower.includes(keyLower)) {
        return value.score;
      }
    }
    
    // æœªåŒ¹é…ï¼Œè¿”å›ä¸­ç­‰åˆ†æ•°
    return 60;
  }

  // =============================================
  // 2. ä»·æ ¼å¯¹æ¯”å·¥å…· - è”åŠ¨æœç´¢å¼•æ“
  // =============================================
  const priceGameSearch = document.getElementById("priceGameSearch");
  const priceSearchResults = document.getElementById("priceSearchResults");
  const priceResult = document.getElementById("priceResult");
  
  // æ‰©å±•çš„æ¸¸æˆä»·æ ¼æ•°æ®åº“ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
  const gameDatabase = [
    { id: 1, name: 'è‰¾å°”ç™»æ³•ç¯', enName: 'Elden Ring', platforms: [
      { name: 'Steam', current: 298, original: 298, discount: 0 },
      { name: 'Epic', current: 268, original: 298, discount: 10 },
      { name: 'æ‰æœ', current: 248, original: 298, discount: 17 }
    ]},
    { id: 2, name: 'èµ›åšæœ‹å…‹2077', enName: 'Cyberpunk 2077', platforms: [
      { name: 'Steam', current: 198, original: 298, discount: 33 },
      { name: 'Epic', current: 178, original: 298, discount: 40 },
      { name: 'GOG', current: 188, original: 298, discount: 37 }
    ]},
    { id: 3, name: 'åšå¾·ä¹‹é—¨3', enName: "Baldur's Gate 3", platforms: [
      { name: 'Steam', current: 298, original: 298, discount: 0 },
      { name: 'GOG', current: 278, original: 298, discount: 7 }
    ]},
    { id: 4, name: 'é»‘ç¥è¯ï¼šæ‚Ÿç©º', enName: 'Black Myth: Wukong', platforms: [
      { name: 'Steam', current: 268, original: 268, discount: 0 },
      { name: 'Epic', current: 268, original: 268, discount: 0 },
      { name: 'WeGame', current: 248, original: 268, discount: 7 }
    ]},
    { id: 5, name: 'æ˜Ÿç©º', enName: 'Starfield', platforms: [
      { name: 'Steam', current: 298, original: 328, discount: 9 },
      { name: 'Xbox Game Pass', current: 68, original: 328, discount: 79, note: 'è®¢é˜…åˆ¶' }
    ]},
    { id: 6, name: 'è’é‡å¤§é•–å®¢2', enName: 'Red Dead Redemption 2', platforms: [
      { name: 'Steam', current: 189, original: 299, discount: 37 },
      { name: 'Epic', current: 179, original: 299, discount: 40 },
      { name: 'Rockstar', current: 169, original: 299, discount: 43 }
    ]},
    { id: 7, name: 'éœæ ¼æ²ƒèŒ¨ä¹‹é—', enName: 'Hogwarts Legacy', platforms: [
      { name: 'Steam', current: 278, original: 298, discount: 7 },
      { name: 'Epic', current: 268, original: 298, discount: 10 }
    ]},
    { id: 8, name: 'æˆ˜ç¥ï¼šè¯¸ç¥é»„æ˜', enName: 'God of War RagnarÃ¶k', platforms: [
      { name: 'Steam', current: 398, original: 398, discount: 0 },
      { name: 'Epic', current: 368, original: 398, discount: 8 }
    ]},
    { id: 9, name: 'åŸç¥', enName: 'Genshin Impact', platforms: [
      { name: 'å®˜æ–¹', current: 0, original: 0, discount: 0, note: 'å…è´¹æ¸¸ç©' },
      { name: 'Epic', current: 0, original: 0, discount: 0, note: 'å…è´¹æ¸¸ç©' }
    ]},
    { id: 10, name: 'ç»åœ°æ±‚ç”Ÿ', enName: 'PUBG', platforms: [
      { name: 'Steam', current: 0, original: 98, discount: 100, note: 'å…è´¹æ¸¸ç©' }
    ]},
    { id: 11, name: 'CS2', enName: 'Counter-Strike 2', platforms: [
      { name: 'Steam', current: 0, original: 0, discount: 0, note: 'å…è´¹æ¸¸ç©' }
    ]},
    { id: 12, name: 'Dota 2', enName: 'Dota 2', platforms: [
      { name: 'Steam', current: 0, original: 0, discount: 0, note: 'å…è´¹æ¸¸ç©' }
    ]},
    { id: 13, name: 'åªç‹¼ï¼šå½±é€äºŒåº¦', enName: 'Sekiro', platforms: [
      { name: 'Steam', current: 268, original: 268, discount: 0 },
      { name: 'Epic', current: 238, original: 268, discount: 11 }
    ]},
    { id: 14, name: 'æ€ªç‰©çŒäººï¼šä¸–ç•Œ', enName: 'Monster Hunter: World', platforms: [
      { name: 'Steam', current: 158, original: 198, discount: 20 }
    ]},
    { id: 15, name: 'å·«å¸ˆ3ï¼šç‹‚çŒ', enName: 'The Witcher 3', platforms: [
      { name: 'Steam', current: 127, original: 127, discount: 0 },
      { name: 'GOG', current: 99, original: 127, discount: 22 }
    ]}
  ];
  
  let searchTimeout = null;
  let selectedGame = null;
  
  // æœç´¢æ¸¸æˆ
  priceGameSearch.addEventListener('input', (e) => {
    const query = e.target.value.trim().toLowerCase();
    
    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    if (searchTimeout) clearTimeout(searchTimeout);
    
    if (query.length < 1) {
      priceSearchResults.style.display = 'none';
      return;
    }
    
    // å»¶è¿Ÿæœç´¢ï¼Œé¿å…é¢‘ç¹è§¦å‘
    searchTimeout = setTimeout(() => {
      const results = gameDatabase.filter(game => 
        game.name.toLowerCase().includes(query) || 
        game.enName.toLowerCase().includes(query)
      ).slice(0, 10); // æœ€å¤šæ˜¾ç¤º10ä¸ªç»“æœ
      
      if (results.length > 0) {
        let html = '<div style="padding: 8px 0;">';
        results.forEach(game => {
          html += `
            <div class="search-result-item" data-game-id="${game.id}" style="padding: 12px 16px; cursor: pointer; transition: all 0.2s; border-bottom: 1px solid rgba(56, 189, 248, 0.1);">
              <div style="font-size: 14px; font-weight: 600; color: var(--accent);">${game.name}</div>
              <div style="font-size: 11px; color: var(--text-muted); margin-top: 2px;">${game.enName}</div>
            </div>
          `;
        });
        html += '</div>';
        priceSearchResults.innerHTML = html;
        priceSearchResults.style.display = 'block';
        
        // æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.search-result-item').forEach(item => {
          item.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(56, 189, 248, 0.1)';
          });
          item.addEventListener('mouseleave', function() {
            this.style.background = 'transparent';
          });
          item.addEventListener('click', function() {
            const gameId = parseInt(this.dataset.gameId);
            selectedGame = gameDatabase.find(g => g.id === gameId);
            priceGameSearch.value = selectedGame.name;
            priceSearchResults.style.display = 'none';
            // è‡ªåŠ¨æ˜¾ç¤ºä»·æ ¼å¯¹æ¯”
            showPriceComparison(selectedGame);
          });
        });
      } else {
        priceSearchResults.innerHTML = '<div style="padding: 16px; text-align: center; color: var(--text-muted); font-size: 13px;">æœªæ‰¾åˆ°ç›¸å…³æ¸¸æˆ</div>';
        priceSearchResults.style.display = 'block';
      }
    }, 300);
  });
  
  // ç‚¹å‡»å¤–éƒ¨å…³é—­æœç´¢ç»“æœ
  document.addEventListener('click', (e) => {
    if (!priceGameSearch.contains(e.target) && !priceSearchResults.contains(e.target)) {
      priceSearchResults.style.display = 'none';
    }
  });
  
  // æ˜¾ç¤ºä»·æ ¼å¯¹æ¯”
  function showPriceComparison(game) {
    const sortedPlatforms = [...game.platforms].sort((a, b) => a.current - b.current);
    const bestDeal = sortedPlatforms[0];
    
    let html = `
      <div style="text-align:center;margin-bottom:20px;">
        <div style="font-size:22px;font-weight:700;color:var(--accent);font-family:'Orbitron',sans-serif;">ã€Š${game.name}ã€‹</div>
        <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">${game.enName}</div>
        <div style="font-size:14px;color:var(--text-muted);margin-top:8px;">æœ€ä½ä»·ï¼š<strong style="color:var(--danger);font-size:18px;">Â¥${bestDeal.current}</strong> <span style="color:var(--accent);">(${bestDeal.name})</span></div>
      </div>
      <div class="price-comparison">
    `;
    
    sortedPlatforms.forEach(platform => {
      const isBest = platform.name === bestDeal.name && platform.current > 0;
      html += `
        <div class="platform-price" style="${isBest ? 'border-color:var(--danger);box-shadow:0 0 20px rgba(239,68,68,0.3);transform:scale(1.02);' : ''}">
          ${isBest ? '<div style="position:absolute;top:-10px;left:50%;transform:translateX(-50%);background:var(--danger);color:#fff;padding:2px 12px;border-radius:12px;font-size:11px;font-weight:700;">æœ€ä¼˜æƒ </div>' : ''}
          <div class="platform-name">${platform.name}</div>
          <div class="platform-current">${platform.current === 0 ? 'å…è´¹' : 'Â¥' + platform.current}</div>
          ${platform.discount > 0 && platform.current > 0 ? `
            <div class="platform-original">åŸä»· Â¥${platform.original}</div>
            <div class="platform-discount">-${platform.discount}%</div>
          ` : ''}
          ${platform.note ? `<div style="font-size:11px;color:var(--text-muted);margin-top:6px;padding:4px 8px;background:rgba(56,189,248,0.1);border-radius:4px;">${platform.note}</div>` : ''}
        </div>
      `;
    });
    
    html += `</div>`;
    
    // æ·»åŠ ä»·æ ¼è¶‹åŠ¿æç¤º
    html += `
      <div style="margin-top:20px;padding:14px;background:rgba(56,189,248,0.05);border-radius:8px;border-left:4px solid var(--accent);">
        <div style="font-size:12px;color:var(--text-muted);line-height:1.6;">
          ğŸ’¡ <strong style="color:var(--accent);">çœé’±å°è´´å£«</strong><br/>
          â€¢ å…³æ³¨å¹³å°å¤§ä¿ƒï¼šSteamå¤å­£/å†¬å­£ç‰¹å–ã€Epicå‘¨å…ç­‰<br/>
          â€¢ å¯¹æ¯”ç¬¬ä¸‰æ–¹å¹³å°ï¼šæ‰æœã€å‡¤å‡°å•†åŸç­‰ç»å¸¸æœ‰é¢å¤–æŠ˜æ‰£<br/>
          â€¢ è®¢é˜…æœåŠ¡ï¼šXbox Game Passã€EA Playå¯å…è´¹ç•…ç©å¤§é‡æ¸¸æˆ
        </div>
      </div>
    `;
    
    priceResult.innerHTML = html;
    priceResult.classList.add('show');
  }

  // =============================================
  // 3. é€šå…³æ—¶é—´è®¡ç®—å™¨
  // =============================================
  const timeTotal = document.getElementById("timeTotal");
  const timeDaily = document.getElementById("timeDaily");
  const timeGoal = document.getElementById("timeGoal");
  const timeBtn = document.getElementById("timeBtn");
  const timeResult = document.getElementById("timeResult");

  timeBtn.addEventListener("click", () => {
    const total = parseFloat(timeTotal.value);
    const daily = parseFloat(timeDaily.value);
    const goalMultiplier = parseFloat(timeGoal.value);
    
    if (!total || !daily || total <= 0 || daily <= 0) {
      timeResult.innerHTML = "<div style='color:var(--danger);text-align:center;'>âš ï¸ è¯·æ­£ç¡®å¡«å†™æ¸¸æˆæ—¶é•¿å’Œæ¯æ—¥æ¸¸æˆæ—¶é—´</div>";
      timeResult.classList.add('show');
      return;
    }
    
    const adjustedTotal = total * goalMultiplier;
    const days = Math.ceil(adjustedTotal / daily);
    const weeks = Math.ceil(days / 7);
    const months = (days / 30).toFixed(1);
    
    let tip, emoji;
    if (days <= 3) {
      tip = "å‘¨æœ«å°±èƒ½é€šå…³ï¼";
      emoji = "âš¡";
    } else if (days <= 7) {
      tip = "ä¸€å‘¨å†…æå®šï¼Œå†²é¸­ï¼";
      emoji = "ğŸ’ª";
    } else if (days <= 14) {
      tip = "ä¸¤å‘¨æ—¶é—´ï¼Œæ…¢æ…¢äº«å—";
      emoji = "ğŸ®";
    } else if (days <= 30) {
      tip = "ä¸€ä¸ªæœˆçš„æ¸¸æˆæ—…ç¨‹";
      emoji = "ğŸ“…";
    } else if (days <= 90) {
      tip = "è¿™æ˜¯ä¸ªé•¿æœŸå·¥ç¨‹ï¼Œè®°å¾—åŠ³é€¸ç»“åˆ";
      emoji = "â°";
    } else {
      tip = "å²è¯—çº§å†’é™©ï¼Œéœ€è¦æå¤§è€å¿ƒ";
      emoji = "ğŸ†";
    }
    
    timeResult.innerHTML = `
      <div style="text-align:center;margin-bottom:16px;">
        <div style="font-size:48px;font-weight:900;color:var(--accent);font-family:'Orbitron',sans-serif;">${days}</div>
        <div style="font-size:14px;color:var(--text-muted);margin-top:4px;">å¤©</div>
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">${weeks}</div>
          <div class="stat-label">å‘¨</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${months}</div>
          <div class="stat-label">æœˆ</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${adjustedTotal.toFixed(0)}</div>
          <div class="stat-label">æ€»æ—¶é•¿(h)</div>
        </div>
      </div>
      <div style="margin-top:16px;text-align:center;font-size:16px;color:var(--accent);">
        ${emoji} ${tip}
      </div>
    `;
    timeResult.classList.add('show');
  });

  // =============================================
  // 4. ä»Šæ™šç©ä»€ä¹ˆ
  // =============================================
  const randBtn = document.getElementById("randBtn");
  const randResult = document.getElementById("randResult");
  const gamePoolEl = document.getElementById("gamePool");
  
  const allGames = [
    "è‰¾å°”ç™»æ³•ç¯", "èµ›åšæœ‹å…‹2077", "åšå¾·ä¹‹é—¨3", "æ˜Ÿç©º", "è’é‡å¤§é•–å®¢2",
    "ç©ºæ´éª‘å£«", "æ˜Ÿéœ²è°·ç‰©è¯­", "æ€æˆ®å°–å¡”", "å“ˆè¿ªæ–¯", "æ­»äº¡ç»†èƒ",
    "åŸç¥", "å´©åï¼šæ˜Ÿç©¹é“é“", "è‹±é›„è”ç›Ÿ", "Dota 2", "CS2",
    "æˆ‘çš„ä¸–ç•Œ", "æ³°æ‹‰ç‘äºš", "é¥¥è’", "åŒäººæˆè¡Œ", "èƒ¡é—¹å¨æˆ¿",
    "é»‘ç¥è¯ï¼šæ‚Ÿç©º", "æ°¸åŠ«æ— é—´", "æ€ªç‰©çŒäººï¼šä¸–ç•Œ", "æœ€ç»ˆå¹»æƒ³14", "é­”å…½ä¸–ç•Œ"
  ];
  
  let selectedGames = [];
  
  // æ¸²æŸ“æ¸¸æˆæ± 
  allGames.forEach(game => {
    const tag = document.createElement('div');
    tag.className = 'game-tag';
    tag.textContent = game;
    tag.addEventListener('click', () => {
      const index = selectedGames.indexOf(game);
      if (index > -1) {
        selectedGames.splice(index, 1);
        tag.classList.remove('selected');
      } else {
        selectedGames.push(game);
        tag.classList.add('selected');
      }
    });
    gamePoolEl.appendChild(tag);
  });
  
  let isRolling = false;
  
  randBtn.addEventListener("click", () => {
    if (selectedGames.length === 0) {
      randResult.innerHTML = "<div style='color:var(--danger);text-align:center;'>âš ï¸ è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€æ¬¾æ¸¸æˆ</div>";
      randResult.classList.add('show');
      return;
    }
    
    if (isRolling) return;
    
    isRolling = true;
    randBtn.textContent = "ğŸ² æŠ½å–ä¸­...";
    randBtn.disabled = true;
    randResult.classList.add('show');
    
    let count = 0;
    const rollInterval = setInterval(() => {
      const idx = Math.floor(Math.random() * selectedGames.length);
      randResult.innerHTML = `<div class="rolling-text">ğŸ² ${selectedGames[idx]}</div>`;
      count++;
      
      if (count >= 15) {
        clearInterval(rollInterval);
        const finalIdx = Math.floor(Math.random() * selectedGames.length);
        const game = selectedGames[finalIdx];
        randResult.innerHTML = `
          <div style="text-align:center;">
            <div style="font-size:36px;margin-bottom:12px;">ğŸ®</div>
            <div style="font-size:24px;font-weight:900;color:var(--accent);font-family:'Orbitron',sans-serif;margin-bottom:8px;">${game}</div>
            <div style="font-size:14px;color:var(--text-muted);">ä»Šæ™šå°±ç©å®ƒäº†ï¼</div>
          </div>
        `;
        randBtn.textContent = "ğŸ² å†æŠ½ä¸€æ¬¡";
        randBtn.disabled = false;
        isRolling = false;
      }
    }, 100);
  });

  // =============================================
  // 5. æ€§ä»·æ¯”åˆ†æ
  // =============================================
  const valuePrice = document.getElementById("valuePrice");
  const valueTime = document.getElementById("valueTime");
  const valueRating = document.getElementById("valueRating");
  const valueBtn = document.getElementById("valueBtn");
  const valueResult = document.getElementById("valueResult");
  
  valueBtn.addEventListener("click", () => {
    const price = parseFloat(valuePrice.value);
    const time = parseFloat(valueTime.value);
    const rating = parseFloat(valueRating.value);
    
    if (!price || !time || !rating || price <= 0 || time <= 0 || rating < 0 || rating > 10) {
      valueResult.innerHTML = "<div style='color:var(--danger);text-align:center;'>âš ï¸ è¯·æ­£ç¡®å¡«å†™æ‰€æœ‰æ•°æ®</div>";
      valueResult.classList.add('show');
      return;
    }
    
    // è®¡ç®—æ€§ä»·æ¯”æŒ‡æ•°
    const hourlyPrice = price / time;
    const ratingScore = rating / 10;
    const valueScore = (1 / hourlyPrice) * ratingScore * 100;
    
    let level, color, comment;
    if (valueScore >= 30) {
      level = "æé«˜";
      color = "#10b981";
      comment = "è¶…å€¼æ¸¸æˆï¼å¼ºçƒˆæ¨èè´­ä¹°ï¼Œæ€§ä»·æ¯”çˆ†è¡¨ï¼";
    } else if (valueScore >= 20) {
      level = "å¾ˆé«˜";
      color = "#3b82f6";
      comment = "éå¸¸å€¼å¾—è´­ä¹°ï¼Œç‰©æœ‰æ‰€å€¼çš„å¥½æ¸¸æˆï¼";
    } else if (valueScore >= 10) {
      level = "ä¸­ç­‰";
      color = "#f59e0b";
      comment = "æ€§ä»·æ¯”å°šå¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“æŠ˜æ—¶å…¥æ‰‹ã€‚";
    } else if (valueScore >= 5) {
      level = "åä½";
      color = "#ef4444";
      comment = "æ€§ä»·æ¯”è¾ƒä½ï¼Œå»ºè®®ç­‰å¤§ä¿ƒæˆ–å²ä½å†ä¹°ã€‚";
    } else {
      level = "å¾ˆä½";
      color = "#991b1b";
      comment = "æ€§ä»·æ¯”å¾ˆä½ï¼Œä¸å¤ªæ¨èè´­ä¹°ã€‚";
    }
    
    valueResult.innerHTML = `
      <div style="text-align:center;margin-bottom:16px;">
        <div style="font-size:48px;font-weight:900;color:${color};font-family:'Orbitron',sans-serif;">${valueScore.toFixed(1)}</div>
        <div style="font-size:14px;color:var(--text-muted);margin-top:4px;">æ€§ä»·æ¯”æŒ‡æ•°</div>
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">Â¥${hourlyPrice.toFixed(2)}</div>
          <div class="stat-label">æ¯å°æ—¶æˆæœ¬</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" style="color:${color};">${level}</div>
          <div class="stat-label">æ€§ä»·æ¯”ç­‰çº§</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${(time / price).toFixed(1)}</div>
          <div class="stat-label">æ—¶é•¿/ä»·æ ¼æ¯”</div>
        </div>
      </div>
      <div style="margin-top:16px;padding:12px;background:rgba(56,189,248,0.1);border-radius:6px;text-align:center;">
        <div style="font-size:14px;color:var(--text-soft);line-height:1.6;">${comment}</div>
      </div>
    `;
    valueResult.classList.add('show');
  });
</script>
</body>
</html>
