<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GameBox æ¸¸ç›’ - ç¤¾åŒº</title>
  <!-- Cyberpunk Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="index.css" />
</head>
<body data-current-page="community" class="cyberpunk-theme">
<div class="page">
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-mark">G</div>
        <div>
          <div>GameBox æ¸¸ç›’</div>
          <div class="logo-sub">LIGHTWEIGHT GAME HUB</div>
        </div>
      </a>
      <nav class="nav-main">
        <a href="index.html" data-page="home" class="nav-link">é¦–é¡µ</a>
        <a href="news-list.html" data-page="news" class="nav-link">èµ„è®¯</a>
        <a href="game-library.html" data-page="library" class="nav-link">æ¸¸æˆåº“</a>
        <a href="ranking.html" data-page="ranking" class="nav-link">
          æ’è¡Œæ¦œ <span class="badge">HOT</span>
        </a>
        <a href="discount.html" data-page="discount" class="nav-link">æŠ˜æ‰£ / å²ä½</a>
        <a href="community.html" data-page="community" class="nav-link">ç¤¾åŒº</a>
        <a href="my-library.html" data-page="my" class="nav-link">æˆ‘çš„æ¸¸æˆ</a>
        <a href="tools.html" data-page="tools" class="nav-link">å·¥å…·ä¸­å¿ƒ</a>
        <a href="profile.html" data-page="profile" class="nav-link">ç”¨æˆ·ä¸­å¿ƒ</a>
      </nav>
      <div class="header-right">
        <div class="header-search">
          <input type="text" placeholder="æœç´¢æ¸¸æˆ / èµ„è®¯ / å¸–å­" />
          <span class="header-search-icon">ğŸ”</span>
        </div>
        <button class="header-user">æœªç™»å½• Â· æ¸¸å®¢</button>
      </div>
    </div>
  </header>
  
  <!-- Cyberpunk Effects -->
  <canvas id="matrix-canvas" class="matrix-bg"></canvas>
  <div id="particles-container" class="particles-container"></div>
  <div id="scroll-progress" class="scroll-progress"></div>
  <div id="loading-overlay" class="loading-overlay">
    <div class="cyberpunk-loader">
      <div class="loader-hexagon"></div>
      <div class="loader-text">LOADING...</div>
    </div>
  </div>

  <main class="main">
    <section>
      <div class="card">
        <div class="page-title">ç¤¾åŒºå¹¿åœº</div>
        <div class="page-intro">
          ç¤ºä¾‹ç¤¾åŒºåˆ—è¡¨ï¼Œåˆ†ä¸ºç»¼åˆ / æ”»ç•¥ / æˆªå›¾ä¸‰ç±»ï¼Œç‚¹å‡»å¸–å­å¯è¿›å…¥è¯¦æƒ…é¡µé¢ã€‚
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>ç‰ˆå—ä¸æœç´¢</span>
          </div>
          <button class="btn btn-primary btn-inline" id="btnFakePost">å‘å¸ƒæ–°å¸–ï¼ˆç¤ºä¾‹ï¼‰</button>
        </header>
        <div class="form">
          <div class="form-row">
            <label>ç‰ˆå—</label>
            <div style="display:flex;gap:6px;flex-wrap:wrap;" id="postBoards">
              <button class="btn btn-inline" data-board="all">å…¨éƒ¨</button>
              <button class="btn btn-inline" data-board="general">ç»¼åˆ</button>
              <button class="btn btn-inline" data-board="guide">æ”»ç•¥</button>
              <button class="btn btn-inline" data-board="shot">æˆªå›¾</button>
            </div>
          </div>
          <div class="form-row">
            <label for="postSearch">æŒ‰æ ‡é¢˜ / æ¸¸æˆæœç´¢</label>
            <input id="postSearch" type="text" placeholder="ä¾‹å¦‚ï¼šè‰¾å°”ç™» æ–°æ‰‹æ€ä¹ˆå¼€è’" />
          </div>
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>å¸–å­åˆ—è¡¨</span>
          </div>
          <div class="chip" id="postCount">å…± 0 å¸–</div>
        </header>
        <div id="postList" class="news-list"></div>
      </div>
    </section>

    <aside>
      <div class="sidebar-card">
        <div class="sidebar-title">æç¤º</div>
        <div class="sidebar-item">
          <span class="label">è¯¦æƒ…ç¤ºä¾‹</span><span class="value">ç‚¹å‡»â€œè‰¾å°”ç™»å°‘æ­»ä¸€ç‚¹â€</span>
        </div>
      </div>
    </aside>
  </main>
</div>

<script src="common.js"></script>
<script src="cyber-effects.js"></script>
<script>
  initCommon();

  const postData = [
    {
      id: "elden-newbie",
      title: "æ–°æ‰‹å…¥é—¨ï¼šå¦‚ä½•åœ¨ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹ä¸­å°‘æ­»ä¸€ç‚¹ï¼ˆç¤ºä¾‹ï¼‰",
      game: "è‰¾å°”ç™»æ³•ç¯",
      board: "guide", // guide / general / shot
      replies: 23,
      likes: 120,
    },
    {
      id: "elden-shot",
      title: "åˆ†äº«ä¸€ä¸‹æˆ‘ä»Šå¤©åœ¨äº¤ç•Œåœ°æ‹åˆ°çš„é£æ™¯ï¼ˆç¤ºä¾‹ï¼‰",
      game: "è‰¾å°”ç™»æ³•ç¯",
      board: "shot",
      replies: 5,
      likes: 45,
    },
    {
      id: "hollow-shot",
      title: "ã€Šç©ºæ´éª‘å£«ã€‹æ·±æ¸ŠåŒºåŸŸæˆªå›¾åˆ†äº«ï¼ˆç¤ºä¾‹ï¼‰",
      game: "ç©ºæ´éª‘å£«",
      board: "shot",
      replies: 3,
      likes: 30,
    },
    {
      id: "cp-build",
      title: "èµ›åšæœ‹å…‹ 2077 æªæ¢°æµ BD åˆ†äº«ï¼ˆç¤ºä¾‹ï¼‰",
      game: "èµ›åšæœ‹å…‹ 2077",
      board: "guide",
      replies: 18,
      likes: 80,
    },
    {
      id: "what-to-play",
      title: "æœ€è¿‘å¤§å®¶éƒ½åœ¨ç©ä»€ä¹ˆï¼Ÿæ¥æŠ¥ä¸ªåˆ°ï¼ˆç¤ºä¾‹ï¼‰",
      game: "å¤šæ¸¸æˆ",
      board: "general",
      replies: 40,
      likes: 100,
    },
  ];

  const postBoards = document.getElementById("postBoards");
  const postSearch = document.getElementById("postSearch");
  const postList = document.getElementById("postList");
  const postCount = document.getElementById("postCount");
  const btnFakePost = document.getElementById("btnFakePost");

  let currentBoard = "all";

  function renderPosts() {
    const kw = postSearch.value.trim().toLowerCase();
    let list = postData.filter((p) => {
      if (currentBoard !== "all" && p.board !== currentBoard) return false;
      if (kw) {
        const text = (p.title + " " + p.game).toLowerCase();
        if (!text.includes(kw)) return false;
      }
      return true;
    });

    // æŒ‰çƒ­åº¦ï¼ˆå›å¤æ•°+ç‚¹èµæ•°ï¼‰æ’åº
    list.sort((a, b) => ((b.replies + b.likes) - (a.replies + a.likes)));

    postList.innerHTML = "";
    postCount.textContent = `å…± ${list.length} å¸–`;

    if (!list.length) {
      postList.innerHTML =
        '<div style="font-size:12px;color:var(--text-muted);padding:20px;text-align:center;">ğŸ’¬ æš‚æ— ç¬¦åˆæ¡ä»¶çš„å¸–å­ã€‚</div>';
      return;
    }

    list.forEach((p, idx) => {
      const div = document.createElement("div");
      div.className = "news-card";
      div.style.cursor = "pointer";
      
      // æ ¹æ®ç‰ˆå—æ·»åŠ å›¾æ ‡
      let boardIcon = "ğŸ’¬";
      let boardText = "ç»¼åˆ";
      if (p.board === "guide") {
        boardIcon = "ğŸ“š";
        boardText = "æ”»ç•¥";
      } else if (p.board === "shot") {
        boardIcon = "ğŸ“·";
        boardText = "æˆªå›¾";
      }
      
      // çƒ­é—¨æ ‡è®°
      const isHot = (p.replies + p.likes) > 100;
      const hotBadge = isHot ? '<span style="color: #ef4444; font-weight: bold; margin-left: 8px;">ğŸ”¥ çƒ­é—¨</span>' : '';
      
      div.innerHTML = `
        <div class="news-title">${boardIcon} ${p.title}${hotBadge}</div>
        <div class="news-meta">ğŸ® ${p.game} Â· ${boardText}</div>
        <div class="news-excerpt" style="display: flex; gap: 16px; align-items: center;">
          <span>ğŸ’¬ ${p.replies} å›å¤</span>
          <span>ğŸ‘ ${p.likes} ç‚¹èµ</span>
        </div>
      `;
      
      // æ·»åŠ æ‚¬åœæ•ˆæœ
      div.addEventListener("mouseenter", () => {
        div.style.transform = "translateX(4px)";
        div.style.borderLeft = "3px solid var(--accent)";
        div.style.transition = "all 0.3s ease";
      });
      
      div.addEventListener("mouseleave", () => {
        div.style.transform = "translateX(0)";
        div.style.borderLeft = "";
      });
      
      div.addEventListener("click", () => {
        // è·³è½¬åˆ°å¸–å­è¯¦æƒ…é¡µ
        window.location.href = `post-detail.html?id=${p.id}`;
      });
      postList.appendChild(div);
    });
  }

  postBoards.addEventListener("click", (e) => {
    const btn = e.target.closest("button");
    if (!btn) return;
    currentBoard = btn.dataset.board;
    postBoards.querySelectorAll("button").forEach((b) => b.classList.remove("btn-primary"));
    btn.classList.add("btn-primary");
    renderPosts();
  });

  postSearch.addEventListener("input", renderPosts);

  btnFakePost.addEventListener("click", () => {
    alert("æœ¬é¡¹ç›®ä¸ºå‰ç«¯è¯¾ç¨‹ç¤ºä¾‹ï¼Œå‘å¸ƒåŠŸèƒ½ä¸ºå‡æŒ‰é’®ï¼Œä¸ä¼šçœŸçš„å‘å¸–ã€‚");
  });

  // é»˜è®¤é€‰ä¸­â€œå…¨éƒ¨â€æŒ‰é’®æ ·å¼
  postBoards.querySelector("button[data-board='all']").classList.add("btn-primary");
  renderPosts();
</script>
</body>
</html>
