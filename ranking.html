<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GameBox æ¸¸ç›’ - æ’è¡Œæ¦œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="index.css" />
</head>
<body data-current-page="ranking">
<div class="page">
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-mark">G</div>
        <div>
          <div>GameBox æ¸¸ç›’</div>
          <div class="logo-sub">LIGHTWEIGHT GAME HUB</div>
        </div>
      </a>
      <nav class="nav-main">
        <a href="index.html" data-page="home" class="nav-link">é¦–é¡µ</a>
        <a href="news-list.html" data-page="news" class="nav-link">èµ„è®¯</a>
        <a href="game-library.html" data-page="library" class="nav-link">æ¸¸æˆåº“</a>
        <a href="ranking.html" data-page="ranking" class="nav-link">
          æ’è¡Œæ¦œ <span class="badge">HOT</span>
        </a>
        <a href="discount.html" data-page="discount" class="nav-link">æŠ˜æ‰£ / å²ä½</a>
        <a href="community.html" data-page="community" class="nav-link">ç¤¾åŒº</a>
        <a href="my-library.html" data-page="my" class="nav-link">æˆ‘çš„æ¸¸æˆ</a>
        <a href="tools.html" data-page="tools" class="nav-link">å·¥å…·ä¸­å¿ƒ</a>
        <a href="profile.html" data-page="profile" class="nav-link">ç”¨æˆ·ä¸­å¿ƒ</a>
      </nav>
      <div class="header-right">
        <div class="header-search">
          <input type="text" placeholder="æœç´¢æ¸¸æˆ / èµ„è®¯ / å¸–å­" />
          <span class="header-search-icon">ğŸ”</span>
        </div>
        <button class="header-user">æœªç™»å½• Â· æ¸¸å®¢</button>
      </div>
    </div>
  </header>

  <main class="main">
    <section>
      <div class="card">
        <div class="page-title">ç»¼åˆæ’è¡Œæ¦œ</div>
        <div class="page-intro">
          æŒ‰è¯„åˆ†æ¦œ / çƒ­åº¦æ¦œ / æ–°å“æ¦œæŸ¥çœ‹ç¤ºä¾‹æ¸¸æˆæ’åï¼Œæ”¯æŒå¹³å°ç­›é€‰ä¸åç§°æœç´¢ã€‚
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>æ¦œå•ç­›é€‰</span>
          </div>
        </header>
        <div class="form">
          <div class="form-row">
            <label for="rankType">æ¦œå•ç±»å‹</label>
            <select id="rankType">
              <option value="score">è¯„åˆ†æ¦œ</option>
              <option value="hot">çƒ­åº¦æ¦œ</option>
              <option value="new">æ–°å“æ¦œ</option>
            </select>
          </div>
          <div class="form-row">
            <label for="rankPlatform">å¹³å°</label>
            <select id="rankPlatform">
              <option value="all">å…¨éƒ¨å¹³å°</option>
              <option value="steam">Steam</option>
              <option value="pc">PCï¼ˆå…¶ä»–ï¼‰</option>
              <option value="ps">PlayStation</option>
              <option value="switch">Switch</option>
              <option value="mobile">æ‰‹æœº</option>
            </select>
          </div>
          <div class="form-row">
            <label for="rankSearch">åç§°å…³é”®å­—</label>
            <input id="rankSearch" type="text" placeholder="è¾“å…¥æ¸¸æˆåï¼Œä¾‹å¦‚ï¼šè‰¾å°”ç™»æ³•ç¯" />
          </div>
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>æ¦œå•ç»“æœ</span>
          </div>
          <div class="chip" id="rankCount">å…± 0 æ¬¾</div>
        </header>
        <ol class="ranking-list" id="rankList"></ol>
      </div>
    </section>

    <aside>
      <div class="sidebar-card">
        <div class="sidebar-title">è¯´æ˜</div>
        <div class="sidebar-item">
          <span class="label">æ•°æ®</span><span class="value">å‰ç«¯å‡æ•°æ®</span>
        </div>
        <div class="sidebar-item">
          <span class="label">æ’åº</span><span class="value">æŒ‰è¯„åˆ†æˆ–çƒ­åº¦æ’åº</span>
        </div>
      </div>
    </aside>
  </main>
</div>

<script src="common.js"></script>
<script>
  initCommon();

  const rankingItems = [
    { name: "è‰¾å°”ç™»æ³•ç¯", board: "score", platform: "steam", score: 9.4, hot: 95, isNew: false, desc: "é­‚ç³» å¼€æ”¾ä¸–ç•Œ ARPG" },
    { name: "ç©ºæ´éª‘å£«", board: "score", platform: "steam", score: 9.6, hot: 88, isNew: false, desc: "ç‹¬ç«‹2D åƒç´ ç¡¬æ ¸" },
    { name: "å·«å¸ˆ 3ï¼šç‹‚çŒ", board: "score", platform: "steam", score: 9.7, hot: 82, isNew: false, desc: "RPG ç¥ä½œ" },
    { name: "èµ›åšæœ‹å…‹ 2077", board: "hot", platform: "steam", score: 8.7, hot: 90, isNew: false, desc: "ç§‘å¹» RPG" },
    { name: "åŸç¥", board: "hot", platform: "pc", score: 8.8, hot: 98, isNew: false, desc: "å¼€æ”¾ä¸–ç•Œ æŠ½å¡" },
    { name: "è‹±é›„è”ç›Ÿ", board: "hot", platform: "pc", score: 8.3, hot: 96, isNew: false, desc: "MOBA è”æœº" },
    { name: "è™šæ„æ–°å“ A", board: "new", platform: "steam", score: 8.2, hot: 70, isNew: true, desc: "æ–°å‘å”® Roguelike" },
    { name: "è™šæ„æ–°å“ B", board: "new", platform: "switch", score: 8.0, hot: 65, isNew: true, desc: "å®¶åº­å‘åŠ¨ä½œ" },
    { name: "æ€æˆ®å°–å¡”", board: "score", platform: "steam", score: 9.0, hot: 75, isNew: false, desc: "å¡ç‰Œ Roguelike" },
    { name: "æ˜Ÿéœ²è°·ç‰©è¯­", board: "score", platform: "switch", score: 9.3, hot: 80, isNew: false, desc: "å†œåœº ä¼‘é—² ç‹¬ç«‹" },
  ];

  const rankType = document.getElementById("rankType");
  const rankPlatform = document.getElementById("rankPlatform");
  const rankSearch = document.getElementById("rankSearch");
  const rankList = document.getElementById("rankList");
  const rankCount = document.getElementById("rankCount");

  function renderRanking() {
    const type = rankType.value; // score / hot / new
    const plat = rankPlatform.value;
    const kw = rankSearch.value.trim().toLowerCase();

    let list = rankingItems.filter(item => {
      if (type === "score" && item.board !== "score") return false;
      if (type === "hot" && item.board !== "hot") return false;
      if (type === "new" && item.board !== "new") return false;
      if (plat !== "all" && item.platform !== plat) return false;
      if (kw) {
        const text = (item.name + " " + item.desc).toLowerCase();
        if (!text.includes(kw)) return false;
      }
      return true;
    });

    if (type === "score") {
      list.sort((a, b) => b.score - a.score);
    } else if (type === "hot") {
      list.sort((a, b) => b.hot - a.hot);
    } else {
      list.sort((a, b) => (b.isNew ? 1 : 0) - (a.isNew ? 1 : 0));
    }

    rankList.innerHTML = "";
    rankCount.textContent = `å…± ${list.length} æ¬¾`;

    if (!list.length) {
      rankList.innerHTML =
        '<li style="font-size:12px;color:var(--text-muted);padding:4px 0;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ¸¸æˆã€‚</li>';
      return;
    }

    list.forEach((item, idx) => {
      const li = document.createElement("li");
      li.className = "ranking-item";
      li.innerHTML = `
        <div class="ranking-pos ${idx === 0 ? "ranking-pos--top1" : ""}">${idx + 1}</div>
        <div class="ranking-game">
          <div class="ranking-cover"></div>
          <div class="ranking-info">
            <div class="ranking-name">${item.name}</div>
            <div class="ranking-meta">${item.desc}</div>
          </div>
        </div>
        <div class="ranking-score">
          <span class="value">${item.score.toFixed(1)}</span>
          <div><span class="tag">${type === "hot" ? "çƒ­åº¦ " + item.hot : (item.isNew ? "æ–°å“" : "è€ç‰Œ")}</span></div>
        </div>
      `;
      li.addEventListener("click", () => {
        if (item.name === "è‰¾å°”ç™»æ³•ç¯") {
          window.location.href = "game-detail.html";
        }
      });
      rankList.appendChild(li);
    });
  }

  rankType.addEventListener("change", renderRanking);
  rankPlatform.addEventListener("change", renderRanking);
  rankSearch.addEventListener("input", renderRanking);

  renderRanking();
</script>
</body>
</html>
