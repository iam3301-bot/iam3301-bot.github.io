<!DOCTYPE html>
<html>
<head>
  <title>Test Game Database</title>
  <script src="mega-game-database.js"></script>
</head>
<body>
  <h1>Testing Game Database...</h1>
  <div id="result"></div>
  <script>
    const resultDiv = document.getElementById('result');
    
    // 检查API是否加载
    if (typeof window.megaGameDB === 'undefined') {
      resultDiv.innerHTML = '<p style="color: red;">❌ window.megaGameDB 未定义!</p>';
    } else {
      resultDiv.innerHTML = '<p style="color: green;">✅ window.megaGameDB 已加载</p>';
      
      // 测试获取游戏
      window.megaGameDB.getAllGames().then(games => {
        resultDiv.innerHTML += `<p>✅ 成功获取 ${games.length} 款游戏</p>`;
        
        // 显示分类统计
        const categories = {};
        games.forEach(g => {
          categories[g.category] = (categories[g.category] || 0) + 1;
        });
        
        resultDiv.innerHTML += '<h2>分类统计:</h2><ul>';
        Object.entries(categories).sort((a,b) => b[1] - a[1]).forEach(([cat, count]) => {
          resultDiv.innerHTML += `<li>${cat}: ${count} 款</li>`;
        });
        resultDiv.innerHTML += '</ul>';
        
        // 显示前10款游戏
        resultDiv.innerHTML += '<h2>前10款游戏:</h2><ul>';
        games.slice(0, 10).forEach(g => {
          resultDiv.innerHTML += `<li>${g.name} - ${g.category}</li>`;
        });
        resultDiv.innerHTML += '</ul>';
      }).catch(error => {
        resultDiv.innerHTML += `<p style="color: red;">❌ 加载失败: ${error.message}</p>`;
      });
    }
  </script>
</body>
</html>
