<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æˆ‘çš„æ¸¸æˆè´¦å· - GameBox æ¸¸ç›’</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <style>
    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }
    
    .accounts-container {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .accounts-header {
      text-align: center;
      margin-bottom: 50px;
    }
    
    .accounts-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 42px;
      color: #f4b93e;
      margin-bottom: 15px;
      text-shadow: 0 0 30px rgba(244, 185, 62, 0.6);
    }
    
    .accounts-header .icon {
      font-size: 60px;
      margin-bottom: 20px;
      display: block;
    }
    
    .accounts-header p {
      color: var(--text-muted);
      font-size: 16px;
    }

    /* æç¤ºæ¨ªå¹… */
    .info-banner {
      background: rgba(244, 185, 62, 0.1);
      border: 1px solid rgba(244, 185, 62, 0.3);
      border-radius: 12px;
      padding: 20px 25px;
      margin-bottom: 40px;
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }

    .info-banner .icon {
      font-size: 24px;
      color: #f4b93e;
      flex-shrink: 0;
    }

    .info-banner .content p {
      color: var(--text-muted);
      font-size: 14px;
      line-height: 1.6;
      margin: 0;
    }

    /* å¹³å°è´¦å·å¡ç‰‡ */
    .platform-section {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(31, 41, 55, 0.9));
      border: 2px solid rgba(244, 185, 62, 0.3);
      border-radius: 16px;
      padding: 35px;
      margin-bottom: 25px;
      transition: all 0.3s ease;
    }

    .platform-section:hover {
      border-color: #f4b93e;
      box-shadow: 0 5px 30px rgba(244, 185, 62, 0.2);
    }

    .platform-section h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 26px;
      color: #f4b93e;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .platform-section h2 .icon {
      font-size: 32px;
    }

    /* å¹³å°å¡ç‰‡ç½‘æ ¼ */
    .platforms-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .platform-card {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(244, 185, 62, 0.2);
      border-radius: 12px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .platform-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(244, 185, 62, 0.1), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .platform-card:hover::before {
      opacity: 1;
    }

    .platform-card:hover {
      transform: translateY(-5px);
      border-color: #f4b93e;
      box-shadow: 0 8px 25px rgba(244, 185, 62, 0.3);
    }

    .platform-card.connected {
      border-color: #10b981;
      background: rgba(16, 185, 129, 0.05);
    }

    .platform-card.connected::before {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), transparent);
    }

    .platform-icon-wrapper {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      border-radius: 16px;
      background: rgba(0, 0, 0, 0.3);
      padding: 12px;
    }
    
    .platform-icon-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .platform-card.epic .platform-icon-wrapper {
      background: linear-gradient(135deg, #2a2a2a, #0078f2);
    }

    .platform-card.xbox .platform-icon-wrapper {
      background: linear-gradient(135deg, #0e7a0d, #107c10);
    }

    .platform-card.playstation .platform-icon-wrapper {
      background: linear-gradient(135deg, #003087, #0070d1);
    }

    .platform-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    .platform-status-badge {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .platform-status-badge.connected {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .platform-status-badge.pending {
      background: rgba(245, 158, 11, 0.2);
      color: #f59e0b;
    }

    .platform-status-badge.disconnected {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    .platform-description {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 20px;
      line-height: 1.6;
    }

    /* è¿”å›æŒ‰é’® */
    .back-button {
      text-align: center;
      margin-top: 40px;
    }

    .back-button a {
      color: #f4b93e;
      text-decoration: none;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .back-button a:hover {
      text-shadow: 0 0 10px rgba(244, 185, 62, 0.8);
    }

    /* å“åº”å¼ */
    @media (max-width: 768px) {
      .accounts-header h1 {
        font-size: 32px;
      }

      .platforms-grid {
        grid-template-columns: 1fr;
      }

      .platform-section {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="accounts-container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="accounts-header">
      <span class="icon">ğŸ®</span>
      <h1>å…¶ä»–å¹³å°</h1>
      <p>ç®¡ç†æ‚¨åœ¨å„ä¸ªæ¸¸æˆå¹³å°çš„è´¦å·ç»‘å®š</p>
    </div>

    <!-- æç¤ºæ¨ªå¹… -->
    <div class="info-banner">
      <span class="icon">ğŸ’¡</span>
      <div class="content">
        <p>æç¤º: Epic Gamesã€Xbox å’Œ PlayStation å¹³å°å‡éœ€é…ç½®å¯¹åº” API åå³å¯åŒæ­¥æ•°æ®ã€‚è¯·é€‰æ‹©å¹³å°è¿›è¡Œé…ç½®å’Œç»‘å®šã€‚</p>
      </div>
    </div>

    <!-- å…¶ä»–å¹³å°åŒºåŸŸ -->
    <div class="platform-section">
      <h2><span class="icon">ğŸ®</span> å…¶ä»–å¹³å°</h2>
      
      <div class="platforms-grid">
        <!-- Epic Games -->
        <div class="platform-card epic" onclick="goToPlatformConfig('epic')">
          <div class="platform-icon-wrapper">
            <img src="https://icons8.com/vue-static/icon/ios/download/FFFFFF/512/epic-games.png" alt="Epic Games">
          </div>
          <div class="platform-name">Epic Games</div>
          <span class="platform-status-badge disconnected" id="epicStatus">æœªç»‘å®š</span>
          <div class="platform-description">
            Epic Games æš‚æ— å…¬å¼€ APIï¼Œéœ€è¦æ‰‹åŠ¨å½•å…¥è´¦å·ä¿¡æ¯
          </div>
        </div>

        <!-- Xbox -->
        <div class="platform-card xbox" onclick="goToPlatformConfig('xbox')">
          <div class="platform-icon-wrapper">
            <img src="https://www.citypng.com/public/uploads/preview/white-xbox-series-s-series-x-logos-png-img-701751694968922vqzbgkxfxu.png" alt="Xbox">
          </div>
          <div class="platform-name">Xbox</div>
          <span class="platform-status-badge disconnected" id="xboxStatus">æœªç»‘å®š</span>
          <div class="platform-description">
            ä½¿ç”¨ OpenXBL API åŒæ­¥ Xbox Live æ¸¸æˆæ•°æ®å’Œæˆå°±
          </div>
        </div>

        <!-- PlayStation -->
        <div class="platform-card playstation" onclick="goToPlatformConfig('psn')">
          <div class="platform-icon-wrapper">
            <img src="https://icons8.com/vue-static/icon/ios/download/FFFFFF/512/playstation.png" alt="PlayStation">
          </div>
          <div class="platform-name">PlayStation</div>
          <span class="platform-status-badge disconnected" id="psnStatus">æœªç»‘å®š</span>
          <div class="platform-description">
            é€šè¿‡ PSN API åŒæ­¥å¥–æ¯æ•°æ®å’Œæ¸¸æˆåº“ä¿¡æ¯
          </div>
        </div>
      </div>
    </div>

    <!-- è¿”å›æŒ‰é’® -->
    <div class="back-button">
      <a href="profile.html">â† è¿”å›ç”¨æˆ·ä¸­å¿ƒ</a>
    </div>
  </div>

  <script src="platform-api-service.js"></script>
  <script src="supabase-config.js"></script>
  <script>
    // =============================================
    // æ¸¸æˆè´¦å·ç®¡ç†è„šæœ¬
    // =============================================

    // è·³è½¬åˆ°å¹³å°é…ç½®é¡µé¢
    function goToPlatformConfig(platform) {
      window.location.href = 'platform-accounts.html#' + platform;
    }

    // æ›´æ–°å¹³å°çŠ¶æ€æ˜¾ç¤º
    function updatePlatformStatus() {
      // Epic Games
      const epicBinding = localStorage.getItem('epic_binding');
      if (epicBinding) {
        try {
          const data = JSON.parse(epicBinding);
          document.getElementById('epicStatus').textContent = 'å·²æ‰‹åŠ¨å½•å…¥';
          document.getElementById('epicStatus').className = 'platform-status-badge connected';
          document.querySelector('.platform-card.epic').classList.add('connected');
        } catch (e) {}
      }

      // Xbox
      const xboxBinding = localStorage.getItem('xbox_binding');
      const xboxApiKey = localStorage.getItem('xbox_api_key');
      if (xboxBinding) {
        try {
          const data = JSON.parse(xboxBinding);
          document.getElementById('xboxStatus').textContent = 'å·²ç»‘å®š';
          document.getElementById('xboxStatus').className = 'platform-status-badge connected';
          document.querySelector('.platform-card.xbox').classList.add('connected');
        } catch (e) {}
      }

      // PlayStation
      const psnBinding = localStorage.getItem('psn_binding');
      const psnConfig = localStorage.getItem('psn_api_config');
      if (psnBinding) {
        try {
          const data = JSON.parse(psnBinding);
          document.getElementById('psnStatus').textContent = 'å·²ç»‘å®š';
          document.getElementById('psnStatus').className = 'platform-status-badge connected';
          document.querySelector('.platform-card.playstation').classList.add('connected');
        } catch (e) {}
      }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      updatePlatformStatus();
      console.log('âœ… æ¸¸æˆè´¦å·ç®¡ç†é¡µé¢å·²åˆå§‹åŒ–');
    });
  </script>
</body>
</html>
