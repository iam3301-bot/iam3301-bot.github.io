<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GameBox æ¸¸ç›’ - æ¸¸æˆèµ„è®¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="index.css" />
</head>
<body data-current-page="news">
<div class="page">
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-mark">G</div>
        <div>
          <div>GameBox æ¸¸ç›’</div>
          <div class="logo-sub">LIGHTWEIGHT GAME HUB</div>
        </div>
      </a>
      <nav class="nav-main">
        <a href="index.html" data-page="home" class="nav-link">é¦–é¡µ</a>
        <a href="news-list.html" data-page="news" class="nav-link">èµ„è®¯</a>
        <a href="game-library.html" data-page="library" class="nav-link">æ¸¸æˆåº“</a>
        <a href="ranking.html" data-page="ranking" class="nav-link">
          æ’è¡Œæ¦œ <span class="badge">HOT</span>
        </a>
        <a href="discount.html" data-page="discount" class="nav-link">æŠ˜æ‰£ / å²ä½</a>
        <a href="community.html" data-page="community" class="nav-link">ç¤¾åŒº</a>
        <a href="my-library.html" data-page="my" class="nav-link">æˆ‘çš„æ¸¸æˆ</a>
        <a href="tools.html" data-page="tools" class="nav-link">å·¥å…·ä¸­å¿ƒ</a>
        <a href="profile.html" data-page="profile" class="nav-link">ç”¨æˆ·ä¸­å¿ƒ</a>
      </nav>
      <div class="header-right">
        <div class="header-search">
          <input type="text" placeholder="æœç´¢æ¸¸æˆ / èµ„è®¯ / å¸–å­" />
          <span class="header-search-icon">ğŸ”</span>
        </div>
        <button class="header-user">æœªç™»å½• Â· æ¸¸å®¢</button>
      </div>
    </div>
  </header>

  <main class="main">
    <section>
      <div class="card">
        <div class="page-title">æ¸¸æˆèµ„è®¯</div>
        <div class="page-intro">
          ç¤ºä¾‹èµ„è®¯åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰åˆ†ç±»ä¸å…³é”®å­—è¿‡æ»¤ï¼Œç‚¹å‡»å¯æŸ¥çœ‹è¯¦æƒ…é¡µé¢ã€‚
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>ç­›é€‰</span>
          </div>
        </header>
        <div class="form">
          <div class="form-row">
            <label>ç±»å‹</label>
            <div style="display:flex;flex-wrap:wrap;gap:8px;font-size:12px;" id="newsCats">
              <label><input type="radio" name="newsCat" value="all" checked /> å…¨éƒ¨</label>
              <label><input type="radio" name="newsCat" value="update" /> æ›´æ–° / ç‰ˆæœ¬</label>
              <label><input type="radio" name="newsCat" value="new" /> æ–°ä½œ / å‘å”®</label>
              <label><input type="radio" name="newsCat" value="event" /> æ´»åŠ¨ / èµ›äº‹</label>
            </div>
          </div>
          <div class="form-row">
            <label for="newsSearch">æŒ‰æ ‡é¢˜ / æ¸¸æˆæœç´¢</label>
            <input id="newsSearch" type="text" placeholder="ä¾‹å¦‚ï¼šè‰¾å°”ç™»æ³•ç¯ DLC" />
          </div>
        </div>
      </div>

      <div class="card">
        <header class="card-header">
          <div class="card-title">
            <span class="dot"></span><span>èµ„è®¯åˆ—è¡¨</span>
          </div>
          <div class="chip" id="newsCount">å…± 0 æ¡</div>
        </header>
        <div id="newsList" class="news-list"></div>
      </div>
    </section>

    <aside>
      <div class="sidebar-card">
        <div class="sidebar-title">æç¤º</div>
        <div class="sidebar-item">
          <span class="label">è¯¦æƒ…ç¤ºä¾‹</span><span class="value">ç‚¹å‡»è‰¾å°”ç™» DLC</span>
        </div>
      </div>
    </aside>
  </main>
</div>

<script src="common.js"></script>
<script>
  initCommon();

  const newsData = [
    {
      id: "elden-dlc",
      title: "ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹å¤§å‹ DLCâ€œé»„é‡‘æ ‘ä¹‹å½±â€æƒ…æŠ¥ï¼ˆç¤ºä¾‹ï¼‰",
      game: "è‰¾å°”ç™»æ³•ç¯",
      type: "update", // update / new / event
      date: "2025-03-01",
      summary: "æ–°å¢åŒºåŸŸã€Boss ä¸æ­¦å™¨ï¼Œå¹³è¡¡æ€§è°ƒæ•´ç­‰ç¤ºä¾‹æ–‡å­—ã€‚",
    },
    {
      id: "hollow-silk",
      title: "ã€Šç©ºæ´éª‘å£«ï¼šä¸ä¹‹æ­Œã€‹æµ‹è¯•å†…å®¹æ›å…‰ï¼ˆç¤ºä¾‹ï¼‰",
      game: "ç©ºæ´éª‘å£«",
      type: "new",
      date: "2025-02-15",
      summary: "å…¨æ–°åœ°å›¾ä¸æ•Œäººï¼Œæˆ˜æ–—èŠ‚å¥æ›´å¿«ï¼Œä»ä¸ºç¤ºä¾‹æ•°æ®ã€‚",
    },
    {
      id: "cp2077-patch",
      title: "ã€Šèµ›åšæœ‹å…‹ 2077ã€‹å†æ¬¡ä¼˜åŒ–è€æ˜¾å¡è¡¨ç°ï¼ˆç¤ºä¾‹ï¼‰",
      game: "èµ›åšæœ‹å…‹ 2077",
      type: "update",
      date: "2025-01-10",
      summary: "å¢é‡è¡¥ä¸ï¼Œæå‡ä¸­ä½ç«¯æ˜¾å¡åœ¨ 1080P ä¸‹çš„å¸§ç‡ã€‚",
    },
    {
      id: "lol-tournament",
      title: "è‹±é›„è”ç›Ÿæ ¡å›­èµ›æ˜¥å­£èµ›æŠ¥åå¼€å¯ï¼ˆç¤ºä¾‹ï¼‰",
      game: "è‹±é›„è”ç›Ÿ",
      type: "event",
      date: "2025-03-20",
      summary: "é¢å‘åœ¨æ ¡å­¦ç”Ÿçš„ LOL èµ›äº‹æ´»åŠ¨ä¿¡æ¯ã€‚",
    },
    {
      id: "indie-fest",
      title: "Steam ç‹¬ç«‹æ¸¸æˆèŠ‚å³å°†å¼€å¯ï¼ˆç¤ºä¾‹ï¼‰",
      game: "å¤šæ¬¾ç‹¬ç«‹æ¸¸æˆ",
      type: "event",
      date: "2025-04-02",
      summary: "å¤§é‡ç‹¬ç«‹æ¸¸æˆå¼€å¯è¯•ç©ä¸æŠ˜æ‰£ï¼Œæ¬¢è¿æ¢ç´¢ã€‚",
    },
  ];

  const newsSearch = document.getElementById("newsSearch");
  const newsList = document.getElementById("newsList");
  const newsCount = document.getElementById("newsCount");
  const newsCatsWrap = document.getElementById("newsCats");

  function getCurrentCat() {
    const checked = newsCatsWrap.querySelector("input[name=newsCat]:checked");
    return checked ? checked.value : "all";
  }

  function renderNews() {
    const cat = getCurrentCat();
    const kw = newsSearch.value.trim().toLowerCase();

    let list = newsData.filter((n) => {
      if (cat !== "all" && n.type !== cat) return false;
      if (kw) {
        const text = (n.title + " " + n.game).toLowerCase();
        if (!text.includes(kw)) return false;
      }
      return true;
    });

    // ç®€å•æŒ‰æ—¥æœŸé™åº
    list.sort((a, b) => (a.date < b.date ? 1 : -1));

    newsList.innerHTML = "";
    newsCount.textContent = `å…± ${list.length} æ¡`;

    if (!list.length) {
      newsList.innerHTML =
        '<div style="font-size:12px;color:var(--text-muted);">æš‚æ— ç¬¦åˆæ¡ä»¶çš„èµ„è®¯ã€‚</div>';
      return;
    }

    list.forEach((n) => {
      const div = document.createElement("div");
      div.className = "news-card";
      div.innerHTML = `
        <div class="news-title">${n.title}</div>
        <div class="news-meta">${n.game} Â· ${n.date} Â· ${
        n.type === "update" ? "æ›´æ–° / ç‰ˆæœ¬" : n.type === "new" ? "æ–°ä½œ / å‘å”®" : "æ´»åŠ¨ / èµ›äº‹"
      }</div>
        <div class="news-excerpt">${n.summary}</div>
      `;
      div.addEventListener("click", () => {
        if (n.id === "elden-dlc") {
          window.location.href = "news-detail.html";
        }
      });
      newsList.appendChild(div);
    });
  }

  newsSearch.addEventListener("input", renderNews);
  newsCatsWrap.addEventListener("change", renderNews);
  renderNews();
</script>
</body>
</html>
